
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>配置编译项 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="mpp-run-tests.html" />
    
    
    <link rel="prev" href="mpp-add-dependencies.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    关于本书
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="index0.html">
            
                <a href="index0.html">
            
                    
                    语言指南
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="overview.html">
            
                <a href="overview.html">
            
                    
                    概述
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="server-overview.html">
            
                <a href="server-overview.html">
            
                    
                    Kotlin 用于服务器端开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="android-overview.html">
            
                <a href="android-overview.html">
            
                    
                    Kotlin 用于 Android 开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="js-overview.html">
            
                <a href="js-overview.html">
            
                    
                    Kotlin 用于 JavaScript 开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="native-overview.html">
            
                <a href="native-overview.html">
            
                    
                    Kotlin 用于原生开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="data-science-overview.html">
            
                <a href="data-science-overview.html">
            
                    
                    Kotlin 用于数据科学
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="coroutines-overview.html">
            
                <a href="coroutines-overview.html">
            
                    
                    协程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="multiplatform.html">
            
                <a href="multiplatform.html">
            
                    
                    多平台
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="whatsnew.html">
            
                <a href="whatsnew.html">
            
                    
                    新特性
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="whatsnew1430.html">
            
                <a href="whatsnew1430.html">
            
                    
                    1.4.30 的新特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="whatsnew-plugin-20203.html">
            
                <a href="whatsnew-plugin-20203.html">
            
                    
                    Kotlin 插件 2020.3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="whatsnew1420.html">
            
                <a href="whatsnew1420.html">
            
                    
                    1.4.20 的新特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="whatsnew14.html">
            
                <a href="whatsnew14.html">
            
                    
                    1.4 的新特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="whatsnew13.html">
            
                <a href="whatsnew13.html">
            
                    
                    1.3 的新特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="whatsnew12.html">
            
                <a href="whatsnew12.html">
            
                    
                    1.2 的新特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="whatsnew11.html">
            
                <a href="whatsnew11.html">
            
                    
                    1.1 的新特性
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="getting-started.html">
            
                <a href="getting-started.html">
            
                    
                    开始
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="basic-syntax.html">
            
                <a href="basic-syntax.html">
            
                    
                    基本语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="idioms.html">
            
                <a href="idioms.html">
            
                    
                    习惯用法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="coding-conventions.html">
            
                <a href="coding-conventions.html">
            
                    
                    编码规范
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="basics.html">
            
                <a href="basics.html">
            
                    
                    基础
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="basic-types.html">
            
                <a href="basic-types.html">
            
                    
                    基本类型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="packages.html">
            
                <a href="packages.html">
            
                    
                    包
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="control-flow.html">
            
                <a href="control-flow.html">
            
                    
                    控制流
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="returns.html">
            
                <a href="returns.html">
            
                    
                    返回与跳转
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="classes-and-objects.html">
            
                <a href="classes-and-objects.html">
            
                    
                    类与对象
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="classes.html">
            
                <a href="classes.html">
            
                    
                    类与继承
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="properties.html">
            
                <a href="properties.html">
            
                    
                    属性与字段
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="interfaces.html">
            
                <a href="interfaces.html">
            
                    
                    接口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="fun-interfaces.html">
            
                <a href="fun-interfaces.html">
            
                    
                    函数式（SAM）接口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="visibility-modifiers.html">
            
                <a href="visibility-modifiers.html">
            
                    
                    可见性修饰符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="extensions.html">
            
                <a href="extensions.html">
            
                    
                    扩展
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="data-classes.html">
            
                <a href="data-classes.html">
            
                    
                    数据类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="sealed-classes.html">
            
                <a href="sealed-classes.html">
            
                    
                    密封类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9" data-path="generics.html">
            
                <a href="generics.html">
            
                    
                    泛型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.10" data-path="nested-classes.html">
            
                <a href="nested-classes.html">
            
                    
                    嵌套类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.11" data-path="enum-classes.html">
            
                <a href="enum-classes.html">
            
                    
                    枚举类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.12" data-path="object-declarations.html">
            
                <a href="object-declarations.html">
            
                    
                    对象
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.13" data-path="type-aliases.html">
            
                <a href="type-aliases.html">
            
                    
                    类型别名
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.14" data-path="inline-classes.html">
            
                <a href="inline-classes.html">
            
                    
                    内联类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.15" data-path="delegation.html">
            
                <a href="delegation.html">
            
                    
                    委托
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.16" data-path="delegated-properties.html">
            
                <a href="delegated-properties.html">
            
                    
                    委托属性
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="functions-and-lambdas.html">
            
                <a href="functions-and-lambdas.html">
            
                    
                    函数与 Lambda 表达式
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="functions.html">
            
                <a href="functions.html">
            
                    
                    函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="lambdas.html">
            
                <a href="lambdas.html">
            
                    
                    Lambda 表达式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="inline-functions.html">
            
                <a href="inline-functions.html">
            
                    
                    内联函数
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="collections.html">
            
                <a href="collections.html">
            
                    
                    集合
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="collections-overview.html">
            
                <a href="collections-overview.html">
            
                    
                    集合概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="constructing-collections.html">
            
                <a href="constructing-collections.html">
            
                    
                    构造集合
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="iterators.html">
            
                <a href="iterators.html">
            
                    
                    迭代器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="ranges.html">
            
                <a href="ranges.html">
            
                    
                    区间与数列
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="sequences.html">
            
                <a href="sequences.html">
            
                    
                    序列
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="collection-operations.html">
            
                <a href="collection-operations.html">
            
                    
                    操作概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7" data-path="collection-transformations.html">
            
                <a href="collection-transformations.html">
            
                    
                    转换
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.8" data-path="collection-filtering.html">
            
                <a href="collection-filtering.html">
            
                    
                    过滤
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.9" data-path="collection-plus-minus.html">
            
                <a href="collection-plus-minus.html">
            
                    
                    加减操作符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.10" data-path="collection-grouping.html">
            
                <a href="collection-grouping.html">
            
                    
                    分组
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.11" data-path="collection-parts.html">
            
                <a href="collection-parts.html">
            
                    
                    取集合的一部分
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.12" data-path="collection-elements.html">
            
                <a href="collection-elements.html">
            
                    
                    取单个元素
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.13" data-path="collection-ordering.html">
            
                <a href="collection-ordering.html">
            
                    
                    排序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.14" data-path="collection-aggregate.html">
            
                <a href="collection-aggregate.html">
            
                    
                    聚合操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.15" data-path="collection-write.html">
            
                <a href="collection-write.html">
            
                    
                    集合写操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.16" data-path="list-operations.html">
            
                <a href="list-operations.html">
            
                    
                    List 相关操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.17" data-path="set-operations.html">
            
                <a href="set-operations.html">
            
                    
                    Set 相关操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.18" data-path="map-operations.html">
            
                <a href="map-operations.html">
            
                    
                    Map 相关操作
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="coroutines.html">
            
                <a href="coroutines.html">
            
                    
                    协程
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="coroutines/coroutines-guide.html">
            
                <a href="coroutines/coroutines-guide.html">
            
                    
                    协程指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="coroutines/basics.html">
            
                <a href="coroutines/basics.html">
            
                    
                    基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="coroutines/cancellation-and-timeouts.html">
            
                <a href="coroutines/cancellation-and-timeouts.html">
            
                    
                    取消与超时
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="coroutines/composing-suspending-functions.html">
            
                <a href="coroutines/composing-suspending-functions.html">
            
                    
                    组合挂起函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="coroutines/coroutine-context-and-dispatchers.html">
            
                <a href="coroutines/coroutine-context-and-dispatchers.html">
            
                    
                    协程上下文与调度器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="coroutines/flow.html">
            
                <a href="coroutines/flow.html">
            
                    
                    异步流
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="coroutines/channels.html">
            
                <a href="coroutines/channels.html">
            
                    
                    通道
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.8" data-path="coroutines/exception-handling.html">
            
                <a href="coroutines/exception-handling.html">
            
                    
                    异常处理与监督
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.9" data-path="coroutines/shared-mutable-state-and-concurrency.html">
            
                <a href="coroutines/shared-mutable-state-and-concurrency.html">
            
                    
                    共享的可变状态与并发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.10" data-path="coroutines/select-expression.html">
            
                <a href="coroutines/select-expression.html">
            
                    
                    Select 表达式（实验性的）
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="multiplatform-programming.html">
            
                <a href="multiplatform-programming.html">
            
                    
                    多平台程序设计
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="mpp-intro.html">
            
                <a href="mpp-intro.html">
            
                    
                    Kotlin 多平台
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="mpp-create-lib.html">
            
                <a href="mpp-create-lib.html">
            
                    
                    创建多平台库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="mpp-discover-project.html">
            
                <a href="mpp-discover-project.html">
            
                    
                    了解项目
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="mpp-share-on-platforms.html">
            
                <a href="mpp-share-on-platforms.html">
            
                    
                    平台间共享代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="mpp-connect-to-apis.html">
            
                <a href="mpp-connect-to-apis.html">
            
                    
                    接入平台相关 API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.6" data-path="mpp-set-up-targets.html">
            
                <a href="mpp-set-up-targets.html">
            
                    
                    手动设置目标
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.7" data-path="mpp-add-dependencies.html">
            
                <a href="mpp-add-dependencies.html">
            
                    
                    添加依赖项
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.10.8" data-path="mpp-configure-compilations.html">
            
                <a href="mpp-configure-compilations.html">
            
                    
                    配置编译项
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9" data-path="mpp-run-tests.html">
            
                <a href="mpp-run-tests.html">
            
                    
                    运行测试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.10" data-path="mpp-publish-lib.html">
            
                <a href="mpp-publish-lib.html">
            
                    
                    发布多平台库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.11" data-path="mpp-build-native-binaries.html">
            
                <a href="mpp-build-native-binaries.html">
            
                    
                    构建最终原生二进制文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.12" data-path="mpp-supported-platforms.html">
            
                <a href="mpp-supported-platforms.html">
            
                    
                    所支持平台
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.13" data-path="mpp-dsl-reference.html">
            
                <a href="mpp-dsl-reference.html">
            
                    
                    多平台 Gradle DSL 参考
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.14" data-path="migrating-multiplatform-project-to-14.html">
            
                <a href="migrating-multiplatform-project-to-14.html">
            
                    
                    迁移到 Kotlin 1.4
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="other.html">
            
                <a href="other.html">
            
                    
                    更多语言结构
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="multi-declarations.html">
            
                <a href="multi-declarations.html">
            
                    
                    解构声明
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="typecasts.html">
            
                <a href="typecasts.html">
            
                    
                    类型检测与转换
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="this-expressions.html">
            
                <a href="this-expressions.html">
            
                    
                    This 表达式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.4" data-path="equality.html">
            
                <a href="equality.html">
            
                    
                    相等性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.5" data-path="operator-overloading.html">
            
                <a href="operator-overloading.html">
            
                    
                    操作符重载
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.6" data-path="null-safety.html">
            
                <a href="null-safety.html">
            
                    
                    空安全
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.7" data-path="exceptions.html">
            
                <a href="exceptions.html">
            
                    
                    异常
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.8" data-path="annotations.html">
            
                <a href="annotations.html">
            
                    
                    注解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.9" data-path="reflection.html">
            
                <a href="reflection.html">
            
                    
                    反射
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.10" data-path="serialization.html">
            
                <a href="serialization.html">
            
                    
                    序列化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.11" data-path="scope-functions.html">
            
                <a href="scope-functions.html">
            
                    
                    作用域函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.12" data-path="type-safe-builders.html">
            
                <a href="type-safe-builders.html">
            
                    
                    类型安全的构建器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.13" data-path="opt-in-requirements.html">
            
                <a href="opt-in-requirements.html">
            
                    
                    选择加入要求
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="corelibs.html">
            
                <a href="corelibs.html">
            
                    
                    核心库
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../reflink.html">
            
                <a href="../reflink.html">
            
                    
                    标准库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../testlink.html">
            
                <a href="../testlink.html">
            
                    
                    kotlin.test
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="reference0.html">
            
                <a href="reference0.html">
            
                    
                    参考
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="keyword-reference.html">
            
                <a href="keyword-reference.html">
            
                    
                    关键字与操作符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="grammar.html">
            
                <a href="grammar.html">
            
                    
                    语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="code-style-migration-guide.html">
            
                <a href="code-style-migration-guide.html">
            
                    
                    编码风格约定
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="interop.html">
            
                <a href="interop.html">
            
                    
                    Java 互操作
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="java-interop.html">
            
                <a href="java-interop.html">
            
                    
                    Kotlin 中调用 Java
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="java-to-kotlin-interop.html">
            
                <a href="java-to-kotlin-interop.html">
            
                    
                    Java 中调用 Kotlin
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="javascript.html">
            
                <a href="javascript.html">
            
                    
                    JavaScript
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="js-project-setup.html">
            
                <a href="js-project-setup.html">
            
                    
                    搭建项目
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="dynamic-type.html">
            
                <a href="dynamic-type.html">
            
                    
                    动态类型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.3" data-path="js-interop.html">
            
                <a href="js-interop.html">
            
                    
                    Kotlin 中调用 JavaScript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.4" data-path="js-to-kotlin-interop.html">
            
                <a href="js-to-kotlin-interop.html">
            
                    
                    JavaScript 中调用 Kotlin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5" data-path="js-modules.html">
            
                <a href="js-modules.html">
            
                    
                    JavaScript 模块
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.6" data-path="js-reflection.html">
            
                <a href="js-reflection.html">
            
                    
                    JavaScript 反射
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.7" data-path="javascript-dce.html">
            
                <a href="javascript-dce.html">
            
                    
                    JavaScript DCE
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8" data-path="js-ir-compiler.html">
            
                <a href="js-ir-compiler.html">
            
                    
                    IR 编译器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.9" data-path="js-external-declarations-with-dukat.html">
            
                <a href="js-external-declarations-with-dukat.html">
            
                    
                    用 Dukat 生成外部声明
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="native.html">
            
                <a href="native.html">
            
                    
                    原生
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="native/concurrency.html">
            
                <a href="native/concurrency.html">
            
                    
                    并发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2" data-path="native/immutability.html">
            
                <a href="native/immutability.html">
            
                    
                    不可变性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3" data-path="native/libraries.html">
            
                <a href="native/libraries.html">
            
                    
                    Kotlin 库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.4" data-path="native/platform_libs.html">
            
                <a href="native/platform_libs.html">
            
                    
                    平台库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.5" data-path="native/c_interop.html">
            
                <a href="native/c_interop.html">
            
                    
                    与 C 语言互操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.6" data-path="native/objc_interop.html">
            
                <a href="native/objc_interop.html">
            
                    
                    与 Objective-C 及 Swift 互操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.7" data-path="native/cocoapods.html">
            
                <a href="native/cocoapods.html">
            
                    
                    CocoaPods 集成
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.8" data-path="native/gradle_plugin.html">
            
                <a href="native/gradle_plugin.html">
            
                    
                    Gradle 插件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.9" data-path="native/debugging.html">
            
                <a href="native/debugging.html">
            
                    
                    调试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.10" data-path="native/faq.html">
            
                <a href="native/faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="tools.html">
            
                <a href="tools.html">
            
                    
                    工具
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.1" data-path="using-gradle.html">
            
                <a href="using-gradle.html">
            
                    
                    Gradle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2" data-path="using-maven.html">
            
                <a href="using-maven.html">
            
                    
                    Maven
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3" data-path="using-ant.html">
            
                <a href="using-ant.html">
            
                    
                    Ant
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.4" data-path="compiler-reference.html">
            
                <a href="compiler-reference.html">
            
                    
                    编译器选项
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5" data-path="compiler-plugins.html">
            
                <a href="compiler-plugins.html">
            
                    
                    编译器插件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.6" data-path="kapt.html">
            
                <a href="kapt.html">
            
                    
                    Kapt
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.7" data-path="kotlin-doc.html">
            
                <a href="kotlin-doc.html">
            
                    
                    Dokka
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.8" data-path="kotlin-osgi.html">
            
                <a href="kotlin-osgi.html">
            
                    
                    OSGi
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="evolution.html">
            
                <a href="evolution.html">
            
                    
                    演进
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.1" data-path="evolution/kotlin-evolution.html">
            
                <a href="evolution/kotlin-evolution.html">
            
                    
                    Kotlin 语言演进
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.2" data-path="evolution/components-stability.html">
            
                <a href="evolution/components-stability.html">
            
                    
                    不同组件的稳定性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.3" data-path="compatibility-guide-13.html">
            
                <a href="compatibility-guide-13.html">
            
                    
                    Kotlin 1.3 的兼容性指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.4" data-path="compatibility-guide-14.html">
            
                <a href="compatibility-guide-14.html">
            
                    
                    Kotlin 1.4 的兼容性指南
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="faq0.html">
            
                <a href="faq0.html">
            
                    
                    常见问题
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.1" data-path="faq.html">
            
                <a href="faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.2" data-path="comparison-to-java.html">
            
                <a href="comparison-to-java.html">
            
                    
                    与 Java 比较
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3" data-path="comparison-to-scala.html">
            
                <a href="comparison-to-scala.html">
            
                    
                    与 Scala 比较
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >配置编译项</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <hr>
<p>type: doc
layout: reference</p>
<h2 id="title-&#x914D;&#x7F6E;&#x7F16;&#x8BD1;&#x9879;">title: &quot;&#x914D;&#x7F6E;&#x7F16;&#x8BD1;&#x9879;&quot;</h2>
<h1 id="&#x914D;&#x7F6E;&#x7F16;&#x8BD1;&#x9879;">&#x914D;&#x7F6E;&#x7F16;&#x8BD1;&#x9879;</h1>
<p>Kotlin multiplatform projects use compilations for producing artifacts. Each target can have one or more compilations, 
for example, for production and test purposes.</p>
<p>For each target, default compilations include:</p>
<ul>
<li><code>main</code> and <code>test</code> compilations for JVM, JS, and Native targets.</li>
<li>A <a href="#compilation-for-android">compilation</a> per <a href="https://developer.android.com/studio/build/build-variants" target="_blank">Android build variant</a>, for Android targets.</li>
</ul>
<p><img src="../assets/images/reference/mpp/compilations.png" alt="Compilations"></p>
<p>If you need to compile something other than production code and unit tests, for example, integration or performance tests, 
you can <a href="#create-a-custom-compilation">create a custom compilation</a>.</p>
<p>You can configure how artifacts are produced in:</p>
<ul>
<li><a href="#&#x914D;&#x7F6E;&#x6240;&#x6709;&#x7F16;&#x8BD1;&#x9879;">&#x6240;&#x6709;&#x7F16;&#x8BD1;&#x9879;</a> in your project at once.</li>
<li><a href="#&#x4E3A;&#x4E00;&#x4E2A;&#x76EE;&#x6807;&#x914D;&#x7F6E;&#x7F16;&#x8BD1;&#x9879;">&#x4E00;&#x4E2A;&#x76EE;&#x6807;&#x7684;&#x7F16;&#x8BD1;&#x9879;</a> since one target can have multiple compilations.</li>
<li><a href="#&#x914D;&#x7F6E;&#x4E00;&#x4E2A;&#x7F16;&#x8BD1;&#x9879;">&#x5177;&#x4F53;&#x7F16;&#x8BD1;&#x9879;</a>.</li>
</ul>
<p>See the <a href="mpp-dsl-reference.html#compilation-parameters">list of compilation parameters</a> and <a href="using-gradle.html#compiler-options">compiler options</a> 
available for all or specific targets.</p>
<h2 id="&#x914D;&#x7F6E;&#x6240;&#x6709;&#x7F16;&#x8BD1;&#x9879;">&#x914D;&#x7F6E;&#x6240;&#x6709;&#x7F16;&#x8BD1;&#x9879;</h2>
<pre><code class="lang-kotlin">kotlin {
    targets.all {
        compilations.all {
            kotlinOptions {
                allWarningsAsErrors = <span class="hljs-literal">true</span>
            }
        }
    }
}
</code></pre>
<h2 id="&#x4E3A;&#x4E00;&#x4E2A;&#x76EE;&#x6807;&#x914D;&#x7F6E;&#x7F16;&#x8BD1;&#x9879;">&#x4E3A;&#x4E00;&#x4E2A;&#x76EE;&#x6807;&#x914D;&#x7F6E;&#x7F16;&#x8BD1;&#x9879;</h2>
<blockquote>
<p>Groovy DSL</p>
</blockquote>
<pre><code class="lang-groovy">kotlin {
    jvm().compilations.all {
        kotlinOptions {
            sourceMap = <span class="hljs-literal">true</span>
            metaInfo = <span class="hljs-literal">true</span>
        }
    }
}
</code></pre>
<blockquote>
<p>Kotlin DSL</p>
</blockquote>
<pre><code class="lang-kotlin">kotlin {
    targets.jvm.compilations.all {
        kotlinOptions {
            sourceMap = <span class="hljs-literal">true</span>
            metaInfo = <span class="hljs-literal">true</span>
        }
    }
}
</code></pre>
<h2 id="&#x914D;&#x7F6E;&#x4E00;&#x4E2A;&#x7F16;&#x8BD1;&#x9879;">&#x914D;&#x7F6E;&#x4E00;&#x4E2A;&#x7F16;&#x8BD1;&#x9879;</h2>
<blockquote>
<p>Groovy DSL</p>
</blockquote>
<pre><code class="lang-groovy">kotlin {
    jvm().compilations.main {
        kotlinOptions {
            jvmTarget = <span class="hljs-string">&quot;1.8&quot;</span>
        }
    }
}
</code></pre>
<blockquote>
<p>Kotlin DSL</p>
</blockquote>
<pre><code class="lang-kotlin">kotlin {
    jvm {
        <span class="hljs-variable"><span class="hljs-keyword">val</span> main by compilations.getting {
            kotlinOptions {
                jvmTarget</span> = <span class="hljs-string">&quot;1.8&quot;</span>
            }
        }
    }
}
</code></pre>
<h2 id="&#x521B;&#x5EFA;&#x81EA;&#x5B9A;&#x4E49;&#x7F16;&#x8BD1;&#x9879;">&#x521B;&#x5EFA;&#x81EA;&#x5B9A;&#x4E49;&#x7F16;&#x8BD1;&#x9879;</h2>
<p>If you need to compile something other than production code and unit tests, for example, integration or performance tests, 
create a custom compilation.</p>
<p>For example, to create a custom compilation for integration tests of the <code>jvm()</code> target, add a new item to the <code>compilations</code> 
collection. </p>
<blockquote>
<p>For custom compilations, you need to set up all dependencies manually. The default source set of a custom compilation 
does not depend on the <code>commonMain</code> and the <code>commonTest</code> source sets.
{:.note}</p>
<p>Groovy DSL</p>
</blockquote>
<pre><code class="lang-groovy">kotlin {
    jvm() {
        compilations.create(<span class="hljs-string">&apos;integrationTest&apos;</span>) {
            defaultSourceSet {
                dependencies {
                    <span class="hljs-keyword">def</span> main = compilations.main
                    <span class="hljs-comment">// Compile against the main compilation&apos;s compile classpath and outputs:</span>
                    implementation(main.compileDependencyFiles + main.output.classesDirs)
                    implementation kotlin(<span class="hljs-string">&apos;test-junit&apos;</span>)
                    <span class="hljs-comment">/* ... */</span>
                }
            }

            <span class="hljs-comment">// Create a test task to run the tests produced by this compilation:</span>
            tasks.register(<span class="hljs-string">&apos;jvmIntegrationTest&apos;</span>, Test) {
                <span class="hljs-comment">// Run the tests with the classpath containing the compile dependencies (including &apos;main&apos;),</span>
                <span class="hljs-comment">// runtime dependencies, and the outputs of this compilation:</span>
                classpath = compileDependencyFiles + runtimeDependencyFiles + output.allOutputs

                <span class="hljs-comment">// Run only the tests from this compilation&apos;s outputs:</span>
                testClassesDirs = output.classesDirs
            }
        }
    }
}
</code></pre>
<blockquote>
<p>Kotlin DSL</p>
</blockquote>
<pre><code class="lang-kotlin">kotlin {
    jvm() {
        compilations {
            <span class="hljs-variable"><span class="hljs-keyword">val</span> main by getting

            <span class="hljs-keyword">val</span> integrationTest by compilations.creating {
                defaultSourceSet {
                    dependencies {
                        // Compile against the main compilation&apos;s compile classpath and outputs</span>:
                        implementation(main.compileDependencyFiles + main.output.classesDirs)
                        implementation(kotlin(<span class="hljs-string">&quot;test-junit&quot;</span>))
                        <span class="hljs-comment">/* ... */</span>
                    }
                }

                <span class="hljs-comment">// Create a test task to run the tests produced by this compilation:</span>
                tasks.register<span class="hljs-type">&lt;Test&gt;</span>(<span class="hljs-string">&quot;integrationTest&quot;</span>) {
                    <span class="hljs-comment">// Run the tests with the classpath containing the compile dependencies (including &apos;main&apos;),</span>
                    <span class="hljs-comment">// runtime dependencies, and the outputs of this compilation:</span>
                    classpath = compileDependencyFiles + runtimeDependencyFiles + output.allOutputs

                    <span class="hljs-comment">// Run only the tests from this compilation&apos;s outputs:</span>
                    testClassesDirs = output.classesDirs
                }
            }
        }
    }
}
</code></pre>
<p>You also need to create a custom compilation in other cases, for example, if you want to combine compilations for different 
JVM versions in your final artifact, or you have already set up source sets in Gradle and want to migrate to a multiplatform project.</p>
<h2 id="include-java-sources-in-jvm-compilations">Include Java sources in JVM compilations</h2>
<p>By default, the JVM target ignores Java sources and compiles only Kotlin source files.</p>
<p>To include Java sources in the compilations of the JVM target, explicitly enable the Java language support for the target:</p>
<ul>
<li><p>When <a href="mpp-create-lib.html">creating a project with the Project Wizard</a>. </p>
<p> <img src="../assets/images/reference/mpp/enable-java-support.png" alt="Enable Java language support"></p>
</li>
<li><p>In the build script of an existing project.</p>
</li>
</ul>
<pre><code class="lang-kotlin">  kotlin {
      jvm {
          withJava()
      }
  }
</code></pre>
<p>  This applies the Gradle <code>java</code> plugin and configures the target to cooperate with it.</p>
<p>The Java source files are placed in the child directories of the Kotlin source roots. For example, the paths are:</p>
<p><img class="img-responsive" src="../assets/images/reference/mpp/java-source-paths.png" alt="Java source files" width="200"></p>
<p>The common source sets cannot include Java sources.</p>
<p>Due to current limitations, the Kotlin plugin replaces some tasks configured by the Java plugin:</p>
<ul>
<li>The target&apos;s JAR task instead of <code>jar</code> (for example, <code>jvmJar</code>).</li>
<li>The target&apos;s test task instead of <code>test</code> (for example, <code>jvmTest</code>).</li>
<li>The resources are processed by the equivalent tasks of the compilations instead of <code>*ProcessResources</code> tasks.</li>
</ul>
<p>The publication of this target is handled by the Kotlin plugin and doesn&apos;t require steps that are specific for the Java plugin.</p>
<h2 id="&#x914D;&#x7F6E;&#x4E0E;&#x539F;&#x751F;&#x8BED;&#x8A00;&#x7684;&#x4E92;&#x64CD;&#x4F5C;">&#x914D;&#x7F6E;&#x4E0E;&#x539F;&#x751F;&#x8BED;&#x8A00;&#x7684;&#x4E92;&#x64CD;&#x4F5C;</h2>
<p>Kotlin provides <a href="native/c_interop.html">interoperability with native languages</a> and DSL to configure this for a specific 
compilation.</p>
<table>
<thead>
<tr>
<th>Native language</th>
<th>Supported platforms</th>
<th>Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td>C</td>
<td>All platforms, except for WebAssembly</td>
<td></td>
</tr>
<tr>
<td>Objective-C</td>
<td>Apple platforms (macOS, iOS, watchOS, tvOS)</td>
<td></td>
</tr>
<tr>
<td>Swift via Objective-C</td>
<td>Apple platforms (macOS, iOS, watchOS, tvOS)</td>
<td>Kotlin can use only Swift declarations marked with the <code>@objc</code> attribute.</td>
</tr>
</tbody>
</table>
<p>A compilation can interact with several native libraries. Configure interoperability in the <code>cinterops</code> block of the 
compilation with <a href="mpp-dsl-reference.html#cinterops">available parameters</a>.</p>
<blockquote>
<p>Groovy DSL</p>
</blockquote>
<pre><code class="lang-groovy">kotlin {
    linuxX64 { <span class="hljs-comment">// Replace with a target you need.</span>
        compilations.main {
            cinterops {
                myInterop {
                    <span class="hljs-comment">// Def-file describing the native API.</span>
                    <span class="hljs-comment">// The default path is src/nativeInterop/cinterop/&lt;interop-name&gt;.def</span>
                    defFile project.file(<span class="hljs-string">&quot;def-file.def&quot;</span>)

                    <span class="hljs-comment">// Package to place the Kotlin API generated.</span>
                    packageName <span class="hljs-string">&apos;org.sample&apos;</span>

                    <span class="hljs-comment">// Options to be passed to compiler by cinterop tool.</span>
                    compilerOpts <span class="hljs-string">&apos;-Ipath/to/headers&apos;</span>

                    <span class="hljs-comment">// Directories for header search (an eqivalent of the -I&lt;path&gt; compiler option).</span>
                    includeDirs.allHeaders(<span class="hljs-string">&quot;path1&quot;</span>, <span class="hljs-string">&quot;path2&quot;</span>)

                    <span class="hljs-comment">// Additional directories to search headers listed in the &apos;headerFilter&apos; def-file option.</span>
                    <span class="hljs-comment">// -headerFilterAdditionalSearchPrefix command line option equivalent.</span>
                    includeDirs.headerFilterOnly(<span class="hljs-string">&quot;path1&quot;</span>, <span class="hljs-string">&quot;path2&quot;</span>)

                    <span class="hljs-comment">// A shortcut for includeDirs.allHeaders.</span>
                    includeDirs(<span class="hljs-string">&quot;include/directory&quot;</span>, <span class="hljs-string">&quot;another/directory&quot;</span>)
                }

                anotherInterop { <span class="hljs-comment">/* ... */</span> }
            }
        }
    }
}
</code></pre>
<blockquote>
<p>Kotlin DSL</p>
</blockquote>
<pre><code class="lang-kotlin">kotlin {
    linuxX64 {  <span class="hljs-comment">// Replace with a target you need.</span>
        compilations.getByName(<span class="hljs-string">&quot;main&quot;</span>) {
            <span class="hljs-variable"><span class="hljs-keyword">val</span> myInterop by cinterops.creating {
                // Def-file describing the native API.
                // The default path is src/nativeInterop/cinterop/&lt;interop-name&gt;.def
                defFile(project.file(&quot;def-file.def&quot;))

                // Package to place the Kotlin API generated.
                packageName(&quot;org.sample&quot;)

                // Options to be passed to compiler by cinterop tool.
                compilerOpts(&quot;-Ipath/to/headers&quot;)

                // Directories to look for headers.
                includeDirs.apply {
                    // Directories for header search (an equivalent of the -I&lt;path&gt; compiler option).
                    allHeaders(&quot;path1&quot;, &quot;path2&quot;)

                    // Additional directories to search headers listed in the &apos;headerFilter&apos; def-file option.
                    // -headerFilterAdditionalSearchPrefix command line option equivalent.
                    headerFilterOnly(&quot;path1&quot;, &quot;path2&quot;)
                }
                // A shortcut for includeDirs.allHeaders.
                includeDirs(&quot;include/directory&quot;, &quot;another/directory&quot;)
            }

            <span class="hljs-keyword">val</span> anotherInterop by cinterops.creating { /* ... */ }
        }
    }
}
</span></code></pre>
<h2 id="android-&#x7F16;&#x8BD1;&#x9879;">Android &#x7F16;&#x8BD1;&#x9879;</h2>
<p>The compilations created for an Android target by default are tied to <a href="https://developer.android.com/studio/build/build-variants" target="_blank">Android build variants</a>: 
for each build variant, a Kotlin compilation is created under the same name.</p>
<p>Then, for each <a href="https://developer.android.com/studio/build/build-variants#sourcesets" target="_blank">Android source set</a> compiled for 
each of the variants, a Kotlin source set is created under that source set name prepended by the target name, like the 
Kotlin source set <code>androidDebug</code> for an Android source set <code>debug</code> and the Kotlin target named <code>android</code>. These Kotlin 
source sets are added to the variants&#x2019; compilations accordingly.</p>
<p>The default source set <code>commonMain</code> is added to each production (application or library) variant&apos;s compilation. 
The <code>commonTest</code> source set is similarly added to the compilations of unit test and instrumented test variants.</p>
<p>Annotation processing with <a href="kapt.html"><code>kapt</code></a> is also supported, but due to current limitations it requires that the Android target 
is created before the <code>kapt</code> dependencies are configured, which needs to be done in a top-level <code>dependencies</code> block rather 
than within Kotlin source set dependencies.</p>
<pre><code class="lang-kotlin">kotlin {
    android { <span class="hljs-comment">/* ... */</span> }
}

dependencies {
    kapt(<span class="hljs-string">&quot;com.my.annotation:processor:1.0.0&quot;</span>)
}
</code></pre>
<h2 id="&#x6E90;&#x96C6;&#x5C42;&#x6B21;&#x7ED3;&#x6784;&#x7684;&#x7F16;&#x8BD1;&#x9879;">&#x6E90;&#x96C6;&#x5C42;&#x6B21;&#x7ED3;&#x6784;&#x7684;&#x7F16;&#x8BD1;&#x9879;</h2>
<p>Kotlin can build a <a href="mpp-share-on-platforms.html#share-code-on-similar-platforms">source set hierarchy</a> with the <code>dependsOn</code> relation.</p>
<p><img class="img-responsive" src="../assets/images/reference/mpp/jvm-js-main.png" alt="Source set hierarchy" width="400"></p>
<p>If the source set <code>jvmMain</code> depends on a source set <code>commonMain</code> then:</p>
<ul>
<li>Whenever <code>jvmMain</code> is compiled for a certain target, <code>commonMain</code> takes part in that compilation as well and is also 
compiled into the same target binary form, such as JVM class files.</li>
<li>Sources of <code>jvmMain</code> &apos;see&apos; the declarations of <code>commonMain</code>, including internal declarations, and also see the 
<a href="mpp-add-dependencies.html">dependencies</a> of <code>commonMain</code>, even those specified as <code>implementation</code> dependencies.</li>
<li><code>jvmMain</code> can contain platform-specific implementations for the <a href="mpp-connect-to-apis.html">expected declarations</a> 
of <code>commonMain</code>.</li>
<li>The resources of <code>commonMain</code> are always processed and copied along with the resources of <code>jvmMain</code>.</li>
<li>The <a href="mpp-dsl-reference.html#language-settings">language settings</a> of <code>jvmMain</code> and <code>commonMain</code> should be consistent.</li>
</ul>
<p>Language settings are checked for consistency in the following ways:</p>
<ul>
<li><code>jvmMain</code> should set a <code>languageVersion</code> that is greater than or equal to that of <code>commonMain</code>.</li>
<li><code>jvmMain</code> should enable all unstable language features that <code>commonMain</code> enables (there&apos;s no such requirement for 
bugfix features).</li>
<li><code>jvmMain</code> should use all experimental annotations that <code>commonMain</code> uses.</li>
<li><code>apiVersion</code>, bugfix language features, and <code>progressiveMode</code> can be set arbitrarily.</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="mpp-add-dependencies.html" class="navigation navigation-prev " aria-label="Previous page: 添加依赖项">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="mpp-run-tests.html" class="navigation navigation-next " aria-label="Next page: 运行测试">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"配置编译项","level":"1.10.8","depth":2,"next":{"title":"运行测试","level":"1.10.9","depth":2,"path":"txt/mpp-run-tests.md","ref":"txt/mpp-run-tests.md","articles":[]},"previous":{"title":"添加依赖项","level":"1.10.7","depth":2,"path":"txt/mpp-add-dependencies.md","ref":"txt/mpp-add-dependencies.md","articles":[]},"dir":"ltr"},"config":{"plugins":["regexplace"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"regexplace":{"substitutes":[{"pattern":"<em>([^<]+)</em>\\{: ?\\.keyword\\ ?}","flags":"g","substitute":"<em><strong><code>$1</code></strong></em>"},{"pattern":"<p>\\{:#([^} ]+)\\}</p>","flags":"g","substitute":"<a name=\"$1\"></a>"},{"pattern":"\"/docs/tutorials/","flags":"g","substitute":"\"https://www.kotlincn.net/docs/tutorials/"},{"pattern":"\"/docs/diagnostics/","flags":"g","substitute":"\"https://www.kotlincn.net/docs/diagnostics/"},{"pattern":"\"/community/","flags":"g","substitute":"\"https://www.kotlincn.net/community/"}]},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":16,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"zh-hans","gitbook":"*"},"file":{"path":"txt/mpp-configure-compilations.md","mtime":"2021-08-26T04:58:23.525Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-08-26T04:59:01.645Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>


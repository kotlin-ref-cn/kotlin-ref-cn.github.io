
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Kotlin 1.3 的兼容性指南 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="compatibility-guide-14.html" />
    
    
    <link rel="prev" href="evolution/components-stability.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    关于本书
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="index0.html">
            
                <a href="index0.html">
            
                    
                    语言指南
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="overview.html">
            
                <a href="overview.html">
            
                    
                    概述
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="server-overview.html">
            
                <a href="server-overview.html">
            
                    
                    Kotlin 用于服务器端开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="android-overview.html">
            
                <a href="android-overview.html">
            
                    
                    Kotlin 用于 Android 开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="js-overview.html">
            
                <a href="js-overview.html">
            
                    
                    Kotlin 用于 JavaScript 开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="native-overview.html">
            
                <a href="native-overview.html">
            
                    
                    Kotlin 用于原生开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="data-science-overview.html">
            
                <a href="data-science-overview.html">
            
                    
                    Kotlin 用于数据科学
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="coroutines-overview.html">
            
                <a href="coroutines-overview.html">
            
                    
                    协程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="multiplatform.html">
            
                <a href="multiplatform.html">
            
                    
                    多平台
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="whatsnew.html">
            
                <a href="whatsnew.html">
            
                    
                    新特性
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="whatsnew1430.html">
            
                <a href="whatsnew1430.html">
            
                    
                    1.4.30 的新特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="whatsnew-plugin-20203.html">
            
                <a href="whatsnew-plugin-20203.html">
            
                    
                    Kotlin 插件 2020.3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="whatsnew1420.html">
            
                <a href="whatsnew1420.html">
            
                    
                    1.4.20 的新特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="whatsnew14.html">
            
                <a href="whatsnew14.html">
            
                    
                    1.4 的新特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="whatsnew13.html">
            
                <a href="whatsnew13.html">
            
                    
                    1.3 的新特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="whatsnew12.html">
            
                <a href="whatsnew12.html">
            
                    
                    1.2 的新特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="whatsnew11.html">
            
                <a href="whatsnew11.html">
            
                    
                    1.1 的新特性
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="getting-started.html">
            
                <a href="getting-started.html">
            
                    
                    开始
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="basic-syntax.html">
            
                <a href="basic-syntax.html">
            
                    
                    基本语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="idioms.html">
            
                <a href="idioms.html">
            
                    
                    习惯用法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="coding-conventions.html">
            
                <a href="coding-conventions.html">
            
                    
                    编码规范
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="basics.html">
            
                <a href="basics.html">
            
                    
                    基础
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="basic-types.html">
            
                <a href="basic-types.html">
            
                    
                    基本类型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="packages.html">
            
                <a href="packages.html">
            
                    
                    包
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="control-flow.html">
            
                <a href="control-flow.html">
            
                    
                    控制流
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="returns.html">
            
                <a href="returns.html">
            
                    
                    返回与跳转
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="classes-and-objects.html">
            
                <a href="classes-and-objects.html">
            
                    
                    类与对象
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="classes.html">
            
                <a href="classes.html">
            
                    
                    类与继承
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="properties.html">
            
                <a href="properties.html">
            
                    
                    属性与字段
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="interfaces.html">
            
                <a href="interfaces.html">
            
                    
                    接口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="fun-interfaces.html">
            
                <a href="fun-interfaces.html">
            
                    
                    函数式（SAM）接口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="visibility-modifiers.html">
            
                <a href="visibility-modifiers.html">
            
                    
                    可见性修饰符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="extensions.html">
            
                <a href="extensions.html">
            
                    
                    扩展
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="data-classes.html">
            
                <a href="data-classes.html">
            
                    
                    数据类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="sealed-classes.html">
            
                <a href="sealed-classes.html">
            
                    
                    密封类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9" data-path="generics.html">
            
                <a href="generics.html">
            
                    
                    泛型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.10" data-path="nested-classes.html">
            
                <a href="nested-classes.html">
            
                    
                    嵌套类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.11" data-path="enum-classes.html">
            
                <a href="enum-classes.html">
            
                    
                    枚举类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.12" data-path="object-declarations.html">
            
                <a href="object-declarations.html">
            
                    
                    对象
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.13" data-path="type-aliases.html">
            
                <a href="type-aliases.html">
            
                    
                    类型别名
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.14" data-path="inline-classes.html">
            
                <a href="inline-classes.html">
            
                    
                    内联类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.15" data-path="delegation.html">
            
                <a href="delegation.html">
            
                    
                    委托
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.16" data-path="delegated-properties.html">
            
                <a href="delegated-properties.html">
            
                    
                    委托属性
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="functions-and-lambdas.html">
            
                <a href="functions-and-lambdas.html">
            
                    
                    函数与 Lambda 表达式
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="functions.html">
            
                <a href="functions.html">
            
                    
                    函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="lambdas.html">
            
                <a href="lambdas.html">
            
                    
                    Lambda 表达式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="inline-functions.html">
            
                <a href="inline-functions.html">
            
                    
                    内联函数
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="collections.html">
            
                <a href="collections.html">
            
                    
                    集合
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="collections-overview.html">
            
                <a href="collections-overview.html">
            
                    
                    集合概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="constructing-collections.html">
            
                <a href="constructing-collections.html">
            
                    
                    构造集合
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="iterators.html">
            
                <a href="iterators.html">
            
                    
                    迭代器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="ranges.html">
            
                <a href="ranges.html">
            
                    
                    区间与数列
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="sequences.html">
            
                <a href="sequences.html">
            
                    
                    序列
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="collection-operations.html">
            
                <a href="collection-operations.html">
            
                    
                    操作概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7" data-path="collection-transformations.html">
            
                <a href="collection-transformations.html">
            
                    
                    转换
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.8" data-path="collection-filtering.html">
            
                <a href="collection-filtering.html">
            
                    
                    过滤
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.9" data-path="collection-plus-minus.html">
            
                <a href="collection-plus-minus.html">
            
                    
                    加减操作符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.10" data-path="collection-grouping.html">
            
                <a href="collection-grouping.html">
            
                    
                    分组
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.11" data-path="collection-parts.html">
            
                <a href="collection-parts.html">
            
                    
                    取集合的一部分
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.12" data-path="collection-elements.html">
            
                <a href="collection-elements.html">
            
                    
                    取单个元素
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.13" data-path="collection-ordering.html">
            
                <a href="collection-ordering.html">
            
                    
                    排序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.14" data-path="collection-aggregate.html">
            
                <a href="collection-aggregate.html">
            
                    
                    聚合操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.15" data-path="collection-write.html">
            
                <a href="collection-write.html">
            
                    
                    集合写操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.16" data-path="list-operations.html">
            
                <a href="list-operations.html">
            
                    
                    List 相关操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.17" data-path="set-operations.html">
            
                <a href="set-operations.html">
            
                    
                    Set 相关操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.18" data-path="map-operations.html">
            
                <a href="map-operations.html">
            
                    
                    Map 相关操作
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="coroutines.html">
            
                <a href="coroutines.html">
            
                    
                    协程
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="coroutines/coroutines-guide.html">
            
                <a href="coroutines/coroutines-guide.html">
            
                    
                    协程指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="coroutines/basics.html">
            
                <a href="coroutines/basics.html">
            
                    
                    基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="coroutines/cancellation-and-timeouts.html">
            
                <a href="coroutines/cancellation-and-timeouts.html">
            
                    
                    取消与超时
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="coroutines/composing-suspending-functions.html">
            
                <a href="coroutines/composing-suspending-functions.html">
            
                    
                    组合挂起函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="coroutines/coroutine-context-and-dispatchers.html">
            
                <a href="coroutines/coroutine-context-and-dispatchers.html">
            
                    
                    协程上下文与调度器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="coroutines/flow.html">
            
                <a href="coroutines/flow.html">
            
                    
                    异步流
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="coroutines/channels.html">
            
                <a href="coroutines/channels.html">
            
                    
                    通道
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.8" data-path="coroutines/exception-handling.html">
            
                <a href="coroutines/exception-handling.html">
            
                    
                    异常处理与监督
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.9" data-path="coroutines/shared-mutable-state-and-concurrency.html">
            
                <a href="coroutines/shared-mutable-state-and-concurrency.html">
            
                    
                    共享的可变状态与并发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.10" data-path="coroutines/select-expression.html">
            
                <a href="coroutines/select-expression.html">
            
                    
                    Select 表达式（实验性的）
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="multiplatform-programming.html">
            
                <a href="multiplatform-programming.html">
            
                    
                    多平台程序设计
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="mpp-intro.html">
            
                <a href="mpp-intro.html">
            
                    
                    Kotlin 多平台
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="mpp-create-lib.html">
            
                <a href="mpp-create-lib.html">
            
                    
                    创建多平台库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="mpp-discover-project.html">
            
                <a href="mpp-discover-project.html">
            
                    
                    了解项目
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="mpp-share-on-platforms.html">
            
                <a href="mpp-share-on-platforms.html">
            
                    
                    平台间共享代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="mpp-connect-to-apis.html">
            
                <a href="mpp-connect-to-apis.html">
            
                    
                    接入平台相关 API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.6" data-path="mpp-set-up-targets.html">
            
                <a href="mpp-set-up-targets.html">
            
                    
                    手动设置目标
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.7" data-path="mpp-add-dependencies.html">
            
                <a href="mpp-add-dependencies.html">
            
                    
                    添加依赖项
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.8" data-path="mpp-configure-compilations.html">
            
                <a href="mpp-configure-compilations.html">
            
                    
                    配置编译项
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9" data-path="mpp-run-tests.html">
            
                <a href="mpp-run-tests.html">
            
                    
                    运行测试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.10" data-path="mpp-publish-lib.html">
            
                <a href="mpp-publish-lib.html">
            
                    
                    发布多平台库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.11" data-path="mpp-build-native-binaries.html">
            
                <a href="mpp-build-native-binaries.html">
            
                    
                    构建最终原生二进制文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.12" data-path="mpp-supported-platforms.html">
            
                <a href="mpp-supported-platforms.html">
            
                    
                    所支持平台
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.13" data-path="mpp-dsl-reference.html">
            
                <a href="mpp-dsl-reference.html">
            
                    
                    多平台 Gradle DSL 参考
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.14" data-path="migrating-multiplatform-project-to-14.html">
            
                <a href="migrating-multiplatform-project-to-14.html">
            
                    
                    迁移到 Kotlin 1.4
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="other.html">
            
                <a href="other.html">
            
                    
                    更多语言结构
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="multi-declarations.html">
            
                <a href="multi-declarations.html">
            
                    
                    解构声明
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="typecasts.html">
            
                <a href="typecasts.html">
            
                    
                    类型检测与转换
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="this-expressions.html">
            
                <a href="this-expressions.html">
            
                    
                    This 表达式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.4" data-path="equality.html">
            
                <a href="equality.html">
            
                    
                    相等性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.5" data-path="operator-overloading.html">
            
                <a href="operator-overloading.html">
            
                    
                    操作符重载
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.6" data-path="null-safety.html">
            
                <a href="null-safety.html">
            
                    
                    空安全
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.7" data-path="exceptions.html">
            
                <a href="exceptions.html">
            
                    
                    异常
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.8" data-path="annotations.html">
            
                <a href="annotations.html">
            
                    
                    注解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.9" data-path="reflection.html">
            
                <a href="reflection.html">
            
                    
                    反射
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.10" data-path="serialization.html">
            
                <a href="serialization.html">
            
                    
                    序列化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.11" data-path="scope-functions.html">
            
                <a href="scope-functions.html">
            
                    
                    作用域函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.12" data-path="type-safe-builders.html">
            
                <a href="type-safe-builders.html">
            
                    
                    类型安全的构建器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.13" data-path="opt-in-requirements.html">
            
                <a href="opt-in-requirements.html">
            
                    
                    选择加入要求
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="corelibs.html">
            
                <a href="corelibs.html">
            
                    
                    核心库
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../reflink.html">
            
                <a href="../reflink.html">
            
                    
                    标准库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../testlink.html">
            
                <a href="../testlink.html">
            
                    
                    kotlin.test
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="reference0.html">
            
                <a href="reference0.html">
            
                    
                    参考
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="keyword-reference.html">
            
                <a href="keyword-reference.html">
            
                    
                    关键字与操作符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="grammar.html">
            
                <a href="grammar.html">
            
                    
                    语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="code-style-migration-guide.html">
            
                <a href="code-style-migration-guide.html">
            
                    
                    编码风格约定
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="interop.html">
            
                <a href="interop.html">
            
                    
                    Java 互操作
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="java-interop.html">
            
                <a href="java-interop.html">
            
                    
                    Kotlin 中调用 Java
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="java-to-kotlin-interop.html">
            
                <a href="java-to-kotlin-interop.html">
            
                    
                    Java 中调用 Kotlin
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="javascript.html">
            
                <a href="javascript.html">
            
                    
                    JavaScript
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="js-project-setup.html">
            
                <a href="js-project-setup.html">
            
                    
                    搭建项目
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="dynamic-type.html">
            
                <a href="dynamic-type.html">
            
                    
                    动态类型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.3" data-path="js-interop.html">
            
                <a href="js-interop.html">
            
                    
                    Kotlin 中调用 JavaScript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.4" data-path="js-to-kotlin-interop.html">
            
                <a href="js-to-kotlin-interop.html">
            
                    
                    JavaScript 中调用 Kotlin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5" data-path="js-modules.html">
            
                <a href="js-modules.html">
            
                    
                    JavaScript 模块
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.6" data-path="js-reflection.html">
            
                <a href="js-reflection.html">
            
                    
                    JavaScript 反射
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.7" data-path="javascript-dce.html">
            
                <a href="javascript-dce.html">
            
                    
                    JavaScript DCE
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8" data-path="js-ir-compiler.html">
            
                <a href="js-ir-compiler.html">
            
                    
                    IR 编译器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.9" data-path="js-external-declarations-with-dukat.html">
            
                <a href="js-external-declarations-with-dukat.html">
            
                    
                    用 Dukat 生成外部声明
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="native.html">
            
                <a href="native.html">
            
                    
                    原生
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="native/concurrency.html">
            
                <a href="native/concurrency.html">
            
                    
                    并发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2" data-path="native/immutability.html">
            
                <a href="native/immutability.html">
            
                    
                    不可变性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3" data-path="native/libraries.html">
            
                <a href="native/libraries.html">
            
                    
                    Kotlin 库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.4" data-path="native/platform_libs.html">
            
                <a href="native/platform_libs.html">
            
                    
                    平台库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.5" data-path="native/c_interop.html">
            
                <a href="native/c_interop.html">
            
                    
                    与 C 语言互操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.6" data-path="native/objc_interop.html">
            
                <a href="native/objc_interop.html">
            
                    
                    与 Objective-C 及 Swift 互操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.7" data-path="native/cocoapods.html">
            
                <a href="native/cocoapods.html">
            
                    
                    CocoaPods 集成
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.8" data-path="native/gradle_plugin.html">
            
                <a href="native/gradle_plugin.html">
            
                    
                    Gradle 插件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.9" data-path="native/debugging.html">
            
                <a href="native/debugging.html">
            
                    
                    调试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.10" data-path="native/faq.html">
            
                <a href="native/faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="tools.html">
            
                <a href="tools.html">
            
                    
                    工具
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.1" data-path="using-gradle.html">
            
                <a href="using-gradle.html">
            
                    
                    Gradle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2" data-path="using-maven.html">
            
                <a href="using-maven.html">
            
                    
                    Maven
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3" data-path="using-ant.html">
            
                <a href="using-ant.html">
            
                    
                    Ant
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.4" data-path="compiler-reference.html">
            
                <a href="compiler-reference.html">
            
                    
                    编译器选项
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5" data-path="compiler-plugins.html">
            
                <a href="compiler-plugins.html">
            
                    
                    编译器插件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.6" data-path="kapt.html">
            
                <a href="kapt.html">
            
                    
                    Kapt
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.7" data-path="kotlin-doc.html">
            
                <a href="kotlin-doc.html">
            
                    
                    Dokka
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.8" data-path="kotlin-osgi.html">
            
                <a href="kotlin-osgi.html">
            
                    
                    OSGi
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="evolution.html">
            
                <a href="evolution.html">
            
                    
                    演进
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.1" data-path="evolution/kotlin-evolution.html">
            
                <a href="evolution/kotlin-evolution.html">
            
                    
                    Kotlin 语言演进
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.2" data-path="evolution/components-stability.html">
            
                <a href="evolution/components-stability.html">
            
                    
                    不同组件的稳定性
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.18.3" data-path="compatibility-guide-13.html">
            
                <a href="compatibility-guide-13.html">
            
                    
                    Kotlin 1.3 的兼容性指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.4" data-path="compatibility-guide-14.html">
            
                <a href="compatibility-guide-14.html">
            
                    
                    Kotlin 1.4 的兼容性指南
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="faq0.html">
            
                <a href="faq0.html">
            
                    
                    常见问题
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.1" data-path="faq.html">
            
                <a href="faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.2" data-path="comparison-to-java.html">
            
                <a href="comparison-to-java.html">
            
                    
                    与 Java 比较
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3" data-path="comparison-to-scala.html">
            
                <a href="comparison-to-scala.html">
            
                    
                    与 Scala 比较
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Kotlin 1.3 的兼容性指南</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <hr>
<p>type: doc
layout: reference</p>
<h2 id="title-kotlin-13-&#x7684;&#x517C;&#x5BB9;&#x6027;&#x6307;&#x5357;">title: &quot;Kotlin 1.3 &#x7684;&#x517C;&#x5BB9;&#x6027;&#x6307;&#x5357;&quot;</h2>
<h1 id="kotlin-13-&#x7684;&#x517C;&#x5BB9;&#x6027;&#x6307;&#x5357;">Kotlin 1.3 &#x7684;&#x517C;&#x5BB9;&#x6027;&#x6307;&#x5357;</h1>
<p><a href="evolution/kotlin-evolution.html"><em>Keeping the Language Modern</em> and <em>Comfortable Updates</em></a> are among the fundamental principles in Kotlin Language Design. The former says that constructs which obstruct language evolution should be removed, and the latter says that this removal should be well-communicated beforehand to make code migration as smooth as possible.</p>
<p>While most of the language changes were already announced through other channels, like update changelogs or compiler warnings, this document summarizes them all, providing a complete reference for migration from Kotlin 1.2 to Kotlin 1.3</p>
<h2 id="basic-terms">Basic terms</h2>
<p>In this document we introduce several kinds of compatibility:</p>
<ul>
<li>Source: source-incompatible change stops code that used to compile fine (without errors or warnings) from compiling anymore</li>
<li>Binary: two binary artifacts are said to be binary-compatible if interchanging them doesn&apos;t lead to loading or linkage errors </li>
<li>Behavioral: a change is said to be behavioral-incompatible if one and the same program demonstrates different behavior before and after applying the change</li>
</ul>
<p>One has to remember that those definitions are given only for pure Kotlin. Compatibility of Kotlin code from the other languages perspective (e.g. from Java) is out of the scope of this document.</p>
<h3 id="evaluation-order-of-constructor-arguments-regarding-clinit-call">Evaluation order of constructor arguments regarding <code>&lt;clinit&gt;</code> call</h3>
<blockquote>
<p><strong>Issue</strong>: <a href="https://youtrack.jetbrains.com/issue/KT-19532" target="_blank">KT-19532</a></p>
<p><strong>Component</strong>: Kotlin/JVM</p>
<p><strong>Incompatible change type</strong>: behavioral</p>
<p><strong>Short summary</strong>: evaluation order with respect to class initialization is changed in 1.3</p>
<p><strong>Deprecation cycle</strong>: </p>
<ul>
<li>&lt;1.3: old behavior (see details in the Issue)</li>
<li>&gt;= 1.3: behavior changed,
<code>-Xnormalize-constructor-calls=disable</code> can be used to temporarily revert to pre-1.3 behavior. Support for this flag is going to be removed in the next major release.</li>
</ul>
</blockquote>
<h3 id="missing-getter-targeted-annotations-on-annotation-constructor-parameters">Missing getter-targeted annotations on annotation constructor parameters</h3>
<blockquote>
<p><strong>Issue</strong>: <a href="https://youtrack.jetbrains.com/issue/KT-25287" target="_blank">KT-25287</a></p>
<p><strong>Component</strong>: Kotlin/JVM</p>
<p><strong>Incompatible change type</strong>: behavioral</p>
<p><strong>Short summary</strong>: getter-target annotations on annotations constructor parameters will be properly written to classfiles in 1.3</p>
<p><strong>Deprecation cycle</strong>: </p>
<ul>
<li>&lt;1.3: getter-target annotations on annotation constructor parameters are not applied</li>
<li>&gt;=1.3: getter-target annotations on annotation constructor parameters are properly applied and written to the generated code </li>
</ul>
</blockquote>
<h3 id="missing-errors-in-class-constructors-get-annotations">Missing errors in class constructor&#x2019;s <code>@get:</code> annotations</h3>
<blockquote>
<p><strong>Issue</strong>: <a href="https://youtrack.jetbrains.com/issue/KT-19628" target="_blank">KT-19628</a></p>
<p><strong>Component</strong>: Core language</p>
<p><strong>Incompatible change type</strong>: Source</p>
<p><strong>Short summary</strong>: errors in getter-target annotations will be reported properly in 1.3</p>
<p><strong>Deprecation cycle</strong>:</p>
<ul>
<li>&lt;1.2: compilation errors in getter-target annotations were not reported, causing incorrect code to be compiled fine.</li>
<li>1.2.x: errors reported only by tooling, the compiler still compiles such code without any warnings</li>
<li>&gt;=1.3: errors reported by the compiler too, causing erroneous code to be rejected</li>
</ul>
</blockquote>
<h3 id="nullability-assertions-on-access-to-java-types-annotated-with-notnull">Nullability assertions on access to Java types annotated with <code>@NotNull</code></h3>
<blockquote>
<p><strong>Issue</strong>: <a href="https://youtrack.jetbrains.com/issue/KT-20830" target="_blank">KT-20830</a></p>
<p><strong>Component</strong>: Kotlin/JVM</p>
<p><strong>Incompatible change type</strong>: Behavioral</p>
<p><strong>Short summary</strong>: nullability assertions for Java-types annotated with not-null annotations will be generated more aggressively, causing code which passes <code>null</code> here to fail faster.</p>
<p><strong>Deprecation cycle</strong>:</p>
<ul>
<li>&lt;1.3: the compiler could miss such assertions when type inference was involved, allowing potential <code>null</code> propagation during compilation against binaries (see Issue for details).</li>
<li>&gt;=1.3: the compiler generates missed assertions. This can case code which was (erroneously) passing <code>null</code>s here fail faster.<br><code>-XXLanguage:-StrictJavaNullabilityAssertions</code> can be used to temporarily return to the pre-1.3 behavior. Support for this flag will be removed in the next major release.</li>
</ul>
</blockquote>
<h3 id="unsound-smartcasts-on-enum-members">Unsound smartcasts on enum members</h3>
<blockquote>
<p><strong>Issue</strong>: <a href="https://youtrack.jetbrains.com/issue/KT-20772" target="_blank">KT-20772</a></p>
<p><strong>Component</strong>: Core language</p>
<p><strong>Incompatible change type</strong>: Source</p>
<p><strong>Short summary</strong>: a smartcast on a member of one enum entry will be correctly applied to only this enum entry</p>
<p><strong>Deprecation cycle</strong>:</p>
<ul>
<li>&lt;1.3: a smartcast on a member of one enum entry could lead to an unsound smartcast on the same member of other enum entries.</li>
<li>&gt;=1.3: smartcast will be properly applied only to the member of one enum entry.<br><code>-XXLanguage:-SoundSmartcastForEnumEntries</code> will temporarily return old behavior. Support for this flag will be removed in the next major release.</li>
</ul>
</blockquote>
<h3 id="val-backing-field-reassignment-in-getter"><code>val</code> backing field reassignment in getter</h3>
<blockquote>
<p><strong>Issue</strong>: <a href="https://youtrack.jetbrains.com/issue/KT-16681" target="_blank">KT-16681</a></p>
<p><strong>Components</strong>: Core language</p>
<p><strong>Incompatible change type</strong>: Source</p>
<p><strong>Short summary</strong>: reassignment of the backing field of <code>val</code>-property in its getter is now prohibited</p>
<p><strong>Deprecation cycle</strong>:</p>
<ul>
<li>&lt;1.2: Kotlin compiler allowed to modify backing field of <code>val</code> in its getter. Not only it violates Kotlin semantic, but also generates ill-behaved JVM bytecode which reassigns <code>final</code> field.</li>
<li>1.2.X: deprecation warning is reported on code which reassigns backing field of <code>val</code></li>
<li>&gt;=1.3: deprecation warnings are elevated to errors </li>
</ul>
</blockquote>
<h3 id="array-capturing-before-the-for-loop-where-it-is-iterated">Array capturing before the <code>for</code>-loop where it is iterated</h3>
<blockquote>
<p><strong>Issue</strong>: <a href="https://youtrack.jetbrains.com/issue/KT-21354" target="_blank">KT-21354</a></p>
<p><strong>Component</strong>: Kotlin/JVM</p>
<p><strong>Incompatible change type</strong>: Source</p>
<p><strong>Short summary</strong>: if an expression in for-loop range is a local variable updated in a loop body, this change affects loop execution. This is inconsistent with iterating over other containers, such as ranges, character sequences, and collections.</p>
<p><strong>Deprecation cycle</strong>:</p>
<ul>
<li>&lt;1.2: described code patterns are compiled fine, but updates to local variable affect loop execution</li>
<li>1.2.X: deprecation warning reported if a range expression in a for-loop is an array-typed local variable which is assigned in a loop body</li>
<li>1.3: change behavior in such cases to be consistent with other containers </li>
</ul>
</blockquote>
<h3 id="nested-classifiers-in-enum-entries">Nested classifiers in enum entries</h3>
<blockquote>
<p><strong>Issue</strong>: <a href="https://youtrack.jetbrains.com/issue/KT-16310" target="_blank">KT-16310</a></p>
<p><strong>Component</strong>: Core language</p>
<p><strong>Incompatible change type</strong>: Source</p>
<p><strong>Short summary</strong>: since Kotlin 1.3, nested classifiers (classes, object, interfaces, annotation classes, enum classes) in enum entries are prohibited</p>
<p><strong>Deprecation cycle</strong>:</p>
<ul>
<li>&lt;1.2: nested classifiers in enum entries are compiled fine, but may fail with exception at runtime</li>
<li>1.2.X: deprecation warnings reported on the nested classifiers</li>
<li>&gt;=1.3: deprecation warnings elevated to errors</li>
</ul>
</blockquote>
<h3 id="data-class-overriding-copy">Data class overriding <code>copy</code></h3>
<blockquote>
<p><strong>Issue</strong>: <a href="https://youtrack.jetbrains.com/issue/KT-19618" target="_blank">KT-19618</a></p>
<p><strong>Components</strong>: Core language</p>
<p><strong>Incompatible change type</strong>: Source</p>
<p><strong>Short summary</strong>: since Kotlin 1.3, data classes are prohibited to override <code>copy()</code></p>
<p><strong>Deprecation cycle</strong>:</p>
<ul>
<li>&lt;1.2: data classes overriding <code>copy()</code> are compiled fine but may fail at runtime/expose strange behavior</li>
<li>1.2.X: deprecation warnings reported on data classes overriding <code>copy()</code></li>
<li>&gt;=1.3: deprecation warnings elevated to errors</li>
</ul>
</blockquote>
<h3 id="inner-classes-inheriting-throwable-that-capture-generic-parameters-from-the-outer-class">Inner classes inheriting <code>Throwable</code> that capture generic parameters from the outer class</h3>
<blockquote>
<p><strong>Issue</strong>: <a href="https://youtrack.jetbrains.com/issue/KT-17981" target="_blank">KT-17981</a></p>
<p><strong>Component</strong>: Core language</p>
<p><strong>Incompatible change type</strong>: Source</p>
<p><strong>Short summary</strong>: since Kotlin 1.3, inner classes are not allowed to inherit <code>Throwable</code></p>
<p><strong>Deprecation cycle</strong>:</p>
<ul>
<li>&lt;1.2: inner classes inheriting <code>Throwable</code> are compiled fine. If such inner classes happen to capture generic parameters, it could lead to strange code patterns which fail at runtime.</li>
<li>1.2.X: deprecation warnings reported on inner classes inheriting <code>Throwable</code></li>
<li>&gt;=1.3: deprecation warnings elevated to errors</li>
</ul>
</blockquote>
<h3 id="visibility-rules-regarding-complex-class-hierarchies-with-companion-objects">Visibility rules regarding complex class hierarchies with companion objects</h3>
<blockquote>
<p><strong>Issues</strong>: <a href="https://youtrack.jetbrains.com/issue/KT-21515" target="_blank">KT-21515</a>, <a href="https://youtrack.jetbrains.com/issue/KT-25333" target="_blank">KT-25333</a></p>
<p><strong>Component</strong>: Core language</p>
<p><strong>Incompatible change type</strong>: Source</p>
<p><strong>Short summary</strong>: since Kotlin 1.3, rules of visibility by short names are stricter for complex class hierarchies involving companion objects and nested classifiers.   </p>
<p><strong>Deprecation cycle</strong>:</p>
<ul>
<li>&lt;1.2: old visibility rules (see Issue for details)</li>
<li>1.2.X: deprecation warnings reported on short names which are not going to be accessible anymore. Tooling suggests automated migration by adding full name.  </li>
<li>&gt;=1.3: deprecation warnings elevated to errors. Offending code should add full qualifiers or explicit imports</li>
</ul>
</blockquote>
<h3 id="non-constant-vararg-annotation-parameters">Non-constant vararg annotation parameters</h3>
<blockquote>
<p><strong>Issue</strong>: <a href="https://youtrack.jetbrains.com/issue/KT-23153" target="_blank">KT-23153</a></p>
<p><strong>Component</strong>: Core language</p>
<p><strong>Incompatible change type</strong>: Source</p>
<p><strong>Short summary</strong>: since Kotlin 1.3, setting non-constant values as vararg annotation parameters is prohibited   </p>
<p><strong>Deprecation cycle</strong>:</p>
<ul>
<li>&lt;1.2: the compiler allows to pass non-constant value for vararg annotation parameter, but actually drops that value during bytecode generation, leading to non-obvious behavior</li>
<li>1.2.X: deprecation warnings reported on such code patterns</li>
<li>&gt;=1.3: deprecation warnings elevated to errors</li>
</ul>
</blockquote>
<h3 id="local-annotation-classes">Local annotation classes</h3>
<blockquote>
<p><strong>Issue</strong>: <a href="https://youtrack.jetbrains.com/issue/KT-23277" target="_blank">KT-23277</a></p>
<p><strong>Component</strong>: Core language</p>
<p><strong>Incompatible change type</strong>: Source</p>
<p><strong>Short summary</strong>: since Kotlin 1.3 local annotation classes are not supported</p>
<p><strong>Deprecation cycle</strong>:</p>
<ul>
<li>&lt;1.2: the compiler compiled local annotation classes fine</li>
<li>1.2.X: deprecation warnings reported on local annotation classes</li>
<li>&gt;=1.3: deprecation warnings elevated to errors</li>
</ul>
</blockquote>
<h3 id="smartcasts-on-local-delegated-properties">Smartcasts on local delegated properties</h3>
<blockquote>
<p><strong>Issue</strong>: <a href="https://youtrack.jetbrains.com/issue/KT-22517" target="_blank">KT-22517</a></p>
<p><strong>Component</strong>: Core language</p>
<p><strong>Incompatible change type</strong>: Source</p>
<p><strong>Short summary</strong>: since Kotlin 1.3 smartcasts on local delegated properties are not allowed</p>
<p><strong>Deprecation cycle</strong>:</p>
<ul>
<li>&lt;1.2: the compiler allowed to smartcast local delegated property, which could lead to unsound smartcast in case of ill-behaved delegates</li>
<li>1.2.X: smartcasts on local delegated properries are reported as deprecated (the compiler issues warnings)</li>
<li>&gt;=1.3: deprecation warnings elevated to errors</li>
</ul>
</blockquote>
<h3 id="mod-operator-convention"><code>mod</code> operator convention</h3>
<blockquote>
<p><strong>Issues</strong>: <a href="https://youtrack.jetbrains.com/issue/KT-24197" target="_blank">KT-24197</a></p>
<p><strong>Component</strong>: Core language</p>
<p><strong>Incompatible change type</strong>: Source</p>
<p><strong>Short summary</strong>: since Kotlin 1.3 declaration of <code>mod</code> operator is prohibited, as well as calls which resolve to such declarations </p>
<p><strong>Deprecation cycle</strong>:</p>
<ul>
<li>1.1.X, 1.2.X: report warnings on declarations of <code>operator mod</code>, as well as on calls which resolve to it</li>
<li>1.3.X: elevate warnings to error, but still allow to resolve to <code>operator mod</code> declarations</li>
<li>1.4.X: do not resolve calls to <code>operator mod</code> anymore</li>
</ul>
</blockquote>
<h3 id="passing-single-element-to-vararg-in-named-form">Passing single element to vararg in named form</h3>
<blockquote>
<p><strong>Issues</strong>: <a href="https://youtrack.jetbrains.com/issue/KT-20588" target="_blank">KT-20588</a>, <a href="https://youtrack.jetbrains.com/issue/KT-20589" target="_blank">KT-20589</a>. See also <a href="https://youtrack.jetbrains.com/issue/KT-20171" target="_blank">KT-20171</a></p>
<p><strong>Component</strong>: Core language</p>
<p><strong>Incompatible change type</strong>: Source</p>
<p><strong>Short summary</strong>: in Kotlin 1.3, assigning single element to vararg is deprecated and should be replaced with consecutive spread and array construction.    </p>
<p><strong>Deprecation cycle</strong>:</p>
<ul>
<li>&lt;1.2: assigning one value element to vararg in named form compiles fine and is treated as assigning <em>single</em> element to array, causing non-obvious behavior when assigning array to vararg</li>
<li>1.2.X: deprecation warnings are reported on such assignments, users are suggested to switch to consecutive spread and array construction.</li>
<li>1.3.X: warnings are elevated to errors</li>
<li>&gt;= 1.4: change semantic of assigning single element to vararg, making assignment of array equivalent to the assignment of a spread of an array </li>
</ul>
</blockquote>
<h3 id="retention-of-annotations-with-target-expression">Retention of annotations with target <code>EXPRESSION</code></h3>
<blockquote>
<p><strong>Issue</strong>: <a href="https://youtrack.jetbrains.com/issue/KT-13762" target="_blank">KT-13762</a></p>
<p><strong>Component</strong>: Core language</p>
<p><strong>Incompatible change type</strong>: Source</p>
<p><strong>Short summary</strong>: since Kotlin 1.3, only <code>SOURCE</code> retention is allowed for annotations with target <code>EXPRESSION</code></p>
<p><strong>Deprecation cycle</strong>:</p>
<ul>
<li>&lt;1.2: annotations with target <code>EXPRESSION</code> and retention other than <code>SOURCE</code> are allowed, but silently ignored at use-sites</li>
<li>1.2.X: deprecation warnings are reported on declarations of such annotations </li>
<li>&gt;=1.3: warnings are elevated to errors</li>
</ul>
</blockquote>
<h3 id="annotations-with-target-parameter-shouldnt-be-applicable-to-parameters-type">Annotations with target <code>PARAMETER</code> shouldn&apos;t be applicable to parameter&apos;s type</h3>
<blockquote>
<p><strong>Issue</strong>: <a href="https://youtrack.jetbrains.com/issue/KT-9580" target="_blank">KT-9580</a></p>
<p><strong>Component</strong>: Core language</p>
<p><strong>Incompatible change type</strong>: Source</p>
<p><strong>Short summary</strong>: since Kotlin 1.3, error about wrong annotation target will be properly reported when annotation with target <code>PARAMETER</code> is applied to parameter&apos;s type </p>
<p><strong>Deprecation cycle</strong>:</p>
<ul>
<li>&lt;1.2: aforementioned code patterns are compiled fine; annotations are silently ignored and not present in the bytecode</li>
<li>1.2.X: deprecation warnings are reported on such usages</li>
<li>&gt;=1.3: warnings are elevated to errors</li>
</ul>
</blockquote>
<h3 id="arraycopyofrange-throws-an-exception-when-indices-are-out-of-bounds-instead-of-enlarging-the-returned-array"><code>Array.copyOfRange</code> throws an exception when indices are out of bounds instead of enlarging the returned array</h3>
<blockquote>
<p><strong>Issue</strong>: <a href="https://youtrack.jetbrains.com/issue/KT-19489" target="_blank">KT-19489</a></p>
<p><strong>Component</strong>: kotlin-stdlib (JVM)</p>
<p><strong>Incompatible change type</strong>: Behavioral</p>
<p><strong>Short summary</strong>: since Kotlin 1.3, ensure that the <code>toIndex</code> argument of <code>Array.copyOfRange</code>, which represents the exclusive end of the range being copied, is not greater than the array size and throw <code>IllegalArgumentException</code> if it is. </p>
<p><strong>Deprecation cycle</strong>:</p>
<ul>
<li>&lt;1.3: in case <code>toIndex</code> in the invocation of <code>Array.copyOfRange</code> is greater than the array size, the missing elements in range fill be filled with <code>null</code>s, violating soundness of the Kotlin type system. </li>
<li>&gt;=1.3: check that <code>toIndex</code> is in the array bounds, and throw exception if it isn&apos;t</li>
</ul>
</blockquote>
<h3 id="progressions-of-ints-and-longs-with-a-step-of-intminvalue-and-longminvalue-are-outlawed-and-wont-be-allowed-to-be-instantiated">Progressions of ints and longs with a step of <code>Int.MIN_VALUE</code> and <code>Long.MIN_VALUE</code> are outlawed and won&#x2019;t be allowed to be instantiated</h3>
<blockquote>
<p><strong>Issue</strong>: <a href="https://youtrack.jetbrains.com/issue/KT-17176" target="_blank">KT-17176</a></p>
<p><strong>Component</strong>: kotlin-stdlib (JVM)</p>
<p><strong>Incompatible change type</strong>: Behavioral</p>
<p><strong>Short summary</strong>: since Kotlin 1.3, prohibit step value for integer progressions being the minimum negative value of its integer type (<code>Long</code> or <code>Int</code>), so that calling <code>IntProgression.fromClosedRange(0, 1, step = Int.MIN_VALUE)</code> will throw <code>IllegalArgumentException</code> </p>
<p><strong>Deprecation cycle</strong>:</p>
<ul>
<li>&lt;1.3: it was possible to create an <code>IntProgression</code> with <code>Int.MIN_VALUE</code> step, which yields two values <code>[0, -2147483648]</code>, which is non-obvious behavior </li>
<li>&gt;=1.3: throw <code>IllegalArgumentException</code> if the step is the minimum negative value of its integer type</li>
</ul>
</blockquote>
<h3 id="check-for-index-overflow-in-operations-on-very-long-sequences">Check for index overflow in operations on very long sequences</h3>
<blockquote>
<p><strong>Issue</strong>: <a href="https://youtrack.jetbrains.com/issue/KT-16097" target="_blank">KT-16097</a></p>
<p><strong>Component</strong>: kotlin-stdlib (JVM)</p>
<p><strong>Incompatible change type</strong>: Behavioral</p>
<p><strong>Short summary</strong>: since Kotlin 1.3, make sure <code>index</code>, <code>count</code> and similar methods do not overflow for long sequences. See the Issue for the full list of affected methods. </p>
<p><strong>Deprecation cycle</strong>:</p>
<ul>
<li>&lt;1.3: calling such methods on very long sequences could produce negative results due to integer overflow </li>
<li>&gt;=1.3: detect overflow in such methods and throw exception immediately</li>
</ul>
</blockquote>
<h3 id="unify-split-by-an-empty-match-regex-result-across-the-platforms">Unify split by an empty match regex result across the platforms</h3>
<blockquote>
<p><strong>Issue</strong>: <a href="https://youtrack.jetbrains.com/issue/KT-21049" target="_blank">KT-21049</a></p>
<p><strong>Component</strong>: kotlin-stdlib (JVM)</p>
<p><strong>Incompatible change type</strong>: Behavioral</p>
<p><strong>Short summary</strong>: since Kotlin 1.3, unify behavior of <code>split</code> method by empty match regex across all platforms </p>
<p><strong>Deprecation cycle</strong>:</p>
<ul>
<li>&lt;1.3: behavior of described calls is different when comparing JS, JRE 6, JRE 7 versus JRE 8+</li>
<li>&gt;=1.3: unify behavior across the platforms</li>
</ul>
</blockquote>
<h3 id="discontinued-deprecated-artifacts-in-the-compiler-distribution">Discontinued deprecated artifacts in the compiler distribution</h3>
<blockquote>
<p><strong>Issue</strong>: <a href="https://youtrack.jetbrains.com/issue/KT-23799" target="_blank">KT-23799</a></p>
<p><strong>Component</strong>: other</p>
<p><strong>Incompatible change type</strong>: Binary</p>
<p><strong>Short summary</strong>: Kotlin 1.3 discontinues the following deprecated binary artifacts:</p>
<ul>
<li><code>kotlin-runtime</code>: use <code>kotlin-stdlib</code> instead</li>
<li><code>kotlin-stdlib-jre7/8</code>: use <code>kotlin-stdlib-jdk7/8</code> instead</li>
<li><code>kotlin-jslib</code> in the compiler distribution: use <code>kotlin-stdlib-js</code> instead</li>
</ul>
<p><strong>Deprecation cycle</strong>:</p>
<ul>
<li>1.2.X: the artifacts were marked as deprecated, the compiler reported warning on usage of those artifacts</li>
<li>&gt;=1.3: the artifacts are discontinued</li>
</ul>
</blockquote>
<h3 id="annotations-in-stdlib">Annotations in stdlib</h3>
<blockquote>
<p><strong>Issue</strong>: <a href="https://youtrack.jetbrains.com/issue/KT-21784" target="_blank">KT-21784</a></p>
<p><strong>Component</strong>: kotlin-stdlib (JVM)</p>
<p><strong>Incompatible change type</strong>: Binary</p>
<p><strong>Short summary</strong>: Kotlin 1.3 removes annotations from the package <code>org.jetbrains.annotations</code> from stdlib and moves them to the separate artifacts shipped with the compiler: <code>annotations-13.0.jar</code> and <code>mutability-annotations-compat.jar</code></p>
<p><strong>Deprecation cycle</strong>:</p>
<ul>
<li>&lt;1.3: annotations were shipped with the stdlib artifact</li>
<li>&gt;=1.3: annotations ship in separate artifacts</li>
</ul>
</blockquote>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="evolution/components-stability.html" class="navigation navigation-prev " aria-label="Previous page: 不同组件的稳定性">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="compatibility-guide-14.html" class="navigation navigation-next " aria-label="Next page: Kotlin 1.4 的兼容性指南">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Kotlin 1.3 的兼容性指南","level":"1.18.3","depth":2,"next":{"title":"Kotlin 1.4 的兼容性指南","level":"1.18.4","depth":2,"path":"txt/compatibility-guide-14.md","ref":"txt/compatibility-guide-14.md","articles":[]},"previous":{"title":"不同组件的稳定性","level":"1.18.2","depth":2,"path":"txt/evolution/components-stability.md","ref":"txt/evolution/components-stability.md","articles":[]},"dir":"ltr"},"config":{"plugins":["regexplace"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"regexplace":{"substitutes":[{"pattern":"<em>([^<]+)</em>\\{: ?\\.keyword\\ ?}","flags":"g","substitute":"<em><strong><code>$1</code></strong></em>"},{"pattern":"<p>\\{:#([^} ]+)\\}</p>","flags":"g","substitute":"<a name=\"$1\"></a>"},{"pattern":"\"/docs/tutorials/","flags":"g","substitute":"\"https://www.kotlincn.net/docs/tutorials/"},{"pattern":"\"/docs/diagnostics/","flags":"g","substitute":"\"https://www.kotlincn.net/docs/diagnostics/"},{"pattern":"\"/community/","flags":"g","substitute":"\"https://www.kotlincn.net/community/"}]},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":16,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"zh-hans","gitbook":"*"},"file":{"path":"txt/compatibility-guide-13.md","mtime":"2021-08-17T05:13:50.065Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-08-26T04:59:01.645Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>



<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>1.4.30 的新特性 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="whatsnew-plugin-20203.html" />
    
    
    <link rel="prev" href="whatsnew.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    关于本书
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="index0.html">
            
                <a href="index0.html">
            
                    
                    语言指南
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="overview.html">
            
                <a href="overview.html">
            
                    
                    概述
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="server-overview.html">
            
                <a href="server-overview.html">
            
                    
                    Kotlin 用于服务器端开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="android-overview.html">
            
                <a href="android-overview.html">
            
                    
                    Kotlin 用于 Android 开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="js-overview.html">
            
                <a href="js-overview.html">
            
                    
                    Kotlin 用于 JavaScript 开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="native-overview.html">
            
                <a href="native-overview.html">
            
                    
                    Kotlin 用于原生开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="data-science-overview.html">
            
                <a href="data-science-overview.html">
            
                    
                    Kotlin 用于数据科学
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="coroutines-overview.html">
            
                <a href="coroutines-overview.html">
            
                    
                    协程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="multiplatform.html">
            
                <a href="multiplatform.html">
            
                    
                    多平台
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="whatsnew.html">
            
                <a href="whatsnew.html">
            
                    
                    新特性
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.3.1" data-path="whatsnew1430.html">
            
                <a href="whatsnew1430.html">
            
                    
                    1.4.30 的新特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="whatsnew-plugin-20203.html">
            
                <a href="whatsnew-plugin-20203.html">
            
                    
                    Kotlin 插件 2020.3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="whatsnew1420.html">
            
                <a href="whatsnew1420.html">
            
                    
                    1.4.20 的新特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="whatsnew14.html">
            
                <a href="whatsnew14.html">
            
                    
                    1.4 的新特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="whatsnew13.html">
            
                <a href="whatsnew13.html">
            
                    
                    1.3 的新特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="whatsnew12.html">
            
                <a href="whatsnew12.html">
            
                    
                    1.2 的新特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="whatsnew11.html">
            
                <a href="whatsnew11.html">
            
                    
                    1.1 的新特性
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="getting-started.html">
            
                <a href="getting-started.html">
            
                    
                    开始
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="basic-syntax.html">
            
                <a href="basic-syntax.html">
            
                    
                    基本语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="idioms.html">
            
                <a href="idioms.html">
            
                    
                    习惯用法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="coding-conventions.html">
            
                <a href="coding-conventions.html">
            
                    
                    编码规范
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="basics.html">
            
                <a href="basics.html">
            
                    
                    基础
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="basic-types.html">
            
                <a href="basic-types.html">
            
                    
                    基本类型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="packages.html">
            
                <a href="packages.html">
            
                    
                    包
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="control-flow.html">
            
                <a href="control-flow.html">
            
                    
                    控制流
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="returns.html">
            
                <a href="returns.html">
            
                    
                    返回与跳转
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="classes-and-objects.html">
            
                <a href="classes-and-objects.html">
            
                    
                    类与对象
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="classes.html">
            
                <a href="classes.html">
            
                    
                    类与继承
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="properties.html">
            
                <a href="properties.html">
            
                    
                    属性与字段
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="interfaces.html">
            
                <a href="interfaces.html">
            
                    
                    接口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="fun-interfaces.html">
            
                <a href="fun-interfaces.html">
            
                    
                    函数式（SAM）接口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="visibility-modifiers.html">
            
                <a href="visibility-modifiers.html">
            
                    
                    可见性修饰符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="extensions.html">
            
                <a href="extensions.html">
            
                    
                    扩展
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="data-classes.html">
            
                <a href="data-classes.html">
            
                    
                    数据类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="sealed-classes.html">
            
                <a href="sealed-classes.html">
            
                    
                    密封类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9" data-path="generics.html">
            
                <a href="generics.html">
            
                    
                    泛型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.10" data-path="nested-classes.html">
            
                <a href="nested-classes.html">
            
                    
                    嵌套类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.11" data-path="enum-classes.html">
            
                <a href="enum-classes.html">
            
                    
                    枚举类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.12" data-path="object-declarations.html">
            
                <a href="object-declarations.html">
            
                    
                    对象
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.13" data-path="type-aliases.html">
            
                <a href="type-aliases.html">
            
                    
                    类型别名
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.14" data-path="inline-classes.html">
            
                <a href="inline-classes.html">
            
                    
                    内联类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.15" data-path="delegation.html">
            
                <a href="delegation.html">
            
                    
                    委托
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.16" data-path="delegated-properties.html">
            
                <a href="delegated-properties.html">
            
                    
                    委托属性
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="functions-and-lambdas.html">
            
                <a href="functions-and-lambdas.html">
            
                    
                    函数与 Lambda 表达式
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="functions.html">
            
                <a href="functions.html">
            
                    
                    函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="lambdas.html">
            
                <a href="lambdas.html">
            
                    
                    Lambda 表达式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="inline-functions.html">
            
                <a href="inline-functions.html">
            
                    
                    内联函数
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="collections.html">
            
                <a href="collections.html">
            
                    
                    集合
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="collections-overview.html">
            
                <a href="collections-overview.html">
            
                    
                    集合概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="constructing-collections.html">
            
                <a href="constructing-collections.html">
            
                    
                    构造集合
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="iterators.html">
            
                <a href="iterators.html">
            
                    
                    迭代器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="ranges.html">
            
                <a href="ranges.html">
            
                    
                    区间与数列
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="sequences.html">
            
                <a href="sequences.html">
            
                    
                    序列
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="collection-operations.html">
            
                <a href="collection-operations.html">
            
                    
                    操作概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7" data-path="collection-transformations.html">
            
                <a href="collection-transformations.html">
            
                    
                    转换
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.8" data-path="collection-filtering.html">
            
                <a href="collection-filtering.html">
            
                    
                    过滤
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.9" data-path="collection-plus-minus.html">
            
                <a href="collection-plus-minus.html">
            
                    
                    加减操作符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.10" data-path="collection-grouping.html">
            
                <a href="collection-grouping.html">
            
                    
                    分组
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.11" data-path="collection-parts.html">
            
                <a href="collection-parts.html">
            
                    
                    取集合的一部分
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.12" data-path="collection-elements.html">
            
                <a href="collection-elements.html">
            
                    
                    取单个元素
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.13" data-path="collection-ordering.html">
            
                <a href="collection-ordering.html">
            
                    
                    排序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.14" data-path="collection-aggregate.html">
            
                <a href="collection-aggregate.html">
            
                    
                    聚合操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.15" data-path="collection-write.html">
            
                <a href="collection-write.html">
            
                    
                    集合写操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.16" data-path="list-operations.html">
            
                <a href="list-operations.html">
            
                    
                    List 相关操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.17" data-path="set-operations.html">
            
                <a href="set-operations.html">
            
                    
                    Set 相关操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.18" data-path="map-operations.html">
            
                <a href="map-operations.html">
            
                    
                    Map 相关操作
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="coroutines.html">
            
                <a href="coroutines.html">
            
                    
                    协程
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="coroutines/coroutines-guide.html">
            
                <a href="coroutines/coroutines-guide.html">
            
                    
                    协程指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="coroutines/basics.html">
            
                <a href="coroutines/basics.html">
            
                    
                    基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="coroutines/cancellation-and-timeouts.html">
            
                <a href="coroutines/cancellation-and-timeouts.html">
            
                    
                    取消与超时
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="coroutines/composing-suspending-functions.html">
            
                <a href="coroutines/composing-suspending-functions.html">
            
                    
                    组合挂起函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="coroutines/coroutine-context-and-dispatchers.html">
            
                <a href="coroutines/coroutine-context-and-dispatchers.html">
            
                    
                    协程上下文与调度器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="coroutines/flow.html">
            
                <a href="coroutines/flow.html">
            
                    
                    异步流
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="coroutines/channels.html">
            
                <a href="coroutines/channels.html">
            
                    
                    通道
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.8" data-path="coroutines/exception-handling.html">
            
                <a href="coroutines/exception-handling.html">
            
                    
                    异常处理与监督
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.9" data-path="coroutines/shared-mutable-state-and-concurrency.html">
            
                <a href="coroutines/shared-mutable-state-and-concurrency.html">
            
                    
                    共享的可变状态与并发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.10" data-path="coroutines/select-expression.html">
            
                <a href="coroutines/select-expression.html">
            
                    
                    Select 表达式（实验性的）
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="multiplatform-programming.html">
            
                <a href="multiplatform-programming.html">
            
                    
                    多平台程序设计
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="platform-specific-declarations.html">
            
                <a href="platform-specific-declarations.html">
            
                    
                    平台相关声明
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="building-mpp-with-gradle.html">
            
                <a href="building-mpp-with-gradle.html">
            
                    
                    以 Gradle 构建
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="mpp-dsl-reference.html">
            
                <a href="mpp-dsl-reference.html">
            
                    
                    多平台 Gradle DSL 参考
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="other.html">
            
                <a href="other.html">
            
                    
                    更多语言结构
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="multi-declarations.html">
            
                <a href="multi-declarations.html">
            
                    
                    解构声明
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="typecasts.html">
            
                <a href="typecasts.html">
            
                    
                    类型检测与转换
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="this-expressions.html">
            
                <a href="this-expressions.html">
            
                    
                    This 表达式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.4" data-path="equality.html">
            
                <a href="equality.html">
            
                    
                    相等性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.5" data-path="operator-overloading.html">
            
                <a href="operator-overloading.html">
            
                    
                    操作符重载
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.6" data-path="null-safety.html">
            
                <a href="null-safety.html">
            
                    
                    空安全
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.7" data-path="exceptions.html">
            
                <a href="exceptions.html">
            
                    
                    异常
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.8" data-path="annotations.html">
            
                <a href="annotations.html">
            
                    
                    注解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.9" data-path="reflection.html">
            
                <a href="reflection.html">
            
                    
                    反射
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.10" data-path="serialization.html">
            
                <a href="serialization.html">
            
                    
                    序列化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.11" data-path="scope-functions.html">
            
                <a href="scope-functions.html">
            
                    
                    作用域函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.12" data-path="type-safe-builders.html">
            
                <a href="type-safe-builders.html">
            
                    
                    类型安全的构建器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.13" data-path="opt-in-requirements.html">
            
                <a href="opt-in-requirements.html">
            
                    
                    选择加入要求
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="corelibs.html">
            
                <a href="corelibs.html">
            
                    
                    核心库
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../reflink.html">
            
                <a href="../reflink.html">
            
                    
                    标准库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../testlink.html">
            
                <a href="../testlink.html">
            
                    
                    kotlin.test
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="reference0.html">
            
                <a href="reference0.html">
            
                    
                    参考
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="keyword-reference.html">
            
                <a href="keyword-reference.html">
            
                    
                    关键字与操作符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="grammar.html">
            
                <a href="grammar.html">
            
                    
                    语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="code-style-migration-guide.html">
            
                <a href="code-style-migration-guide.html">
            
                    
                    编码风格约定
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="interop.html">
            
                <a href="interop.html">
            
                    
                    Java 互操作
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="java-interop.html">
            
                <a href="java-interop.html">
            
                    
                    Kotlin 中调用 Java
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="java-to-kotlin-interop.html">
            
                <a href="java-to-kotlin-interop.html">
            
                    
                    Java 中调用 Kotlin
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="javascript.html">
            
                <a href="javascript.html">
            
                    
                    JavaScript
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="js-project-setup.html">
            
                <a href="js-project-setup.html">
            
                    
                    搭建项目
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="dynamic-type.html">
            
                <a href="dynamic-type.html">
            
                    
                    动态类型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.3" data-path="js-interop.html">
            
                <a href="js-interop.html">
            
                    
                    Kotlin 中调用 JavaScript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.4" data-path="js-to-kotlin-interop.html">
            
                <a href="js-to-kotlin-interop.html">
            
                    
                    JavaScript 中调用 Kotlin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5" data-path="js-modules.html">
            
                <a href="js-modules.html">
            
                    
                    JavaScript 模块
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.6" data-path="js-reflection.html">
            
                <a href="js-reflection.html">
            
                    
                    JavaScript 反射
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.7" data-path="javascript-dce.html">
            
                <a href="javascript-dce.html">
            
                    
                    JavaScript DCE
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8" data-path="js-ir-compiler.html">
            
                <a href="js-ir-compiler.html">
            
                    
                    IR 编译器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.9" data-path="js-external-declarations-with-dukat.html">
            
                <a href="js-external-declarations-with-dukat.html">
            
                    
                    用 Dukat 生成外部声明
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="native.html">
            
                <a href="native.html">
            
                    
                    原生
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="native/concurrency.html">
            
                <a href="native/concurrency.html">
            
                    
                    并发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2" data-path="native/immutability.html">
            
                <a href="native/immutability.html">
            
                    
                    不可变性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3" data-path="native/libraries.html">
            
                <a href="native/libraries.html">
            
                    
                    Kotlin 库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.4" data-path="native/platform_libs.html">
            
                <a href="native/platform_libs.html">
            
                    
                    平台库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.5" data-path="native/c_interop.html">
            
                <a href="native/c_interop.html">
            
                    
                    与 C 语言互操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.6" data-path="native/objc_interop.html">
            
                <a href="native/objc_interop.html">
            
                    
                    与 Objective-C 及 Swift 互操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.7" data-path="native/cocoapods.html">
            
                <a href="native/cocoapods.html">
            
                    
                    CocoaPods 集成
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.8" data-path="native/gradle_plugin.html">
            
                <a href="native/gradle_plugin.html">
            
                    
                    Gradle 插件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.9" data-path="native/debugging.html">
            
                <a href="native/debugging.html">
            
                    
                    调试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.10" data-path="native/faq.html">
            
                <a href="native/faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="tools.html">
            
                <a href="tools.html">
            
                    
                    工具
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.1" data-path="using-gradle.html">
            
                <a href="using-gradle.html">
            
                    
                    Gradle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2" data-path="using-maven.html">
            
                <a href="using-maven.html">
            
                    
                    Maven
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3" data-path="using-ant.html">
            
                <a href="using-ant.html">
            
                    
                    Ant
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.4" data-path="compiler-reference.html">
            
                <a href="compiler-reference.html">
            
                    
                    编译器选项
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5" data-path="compiler-plugins.html">
            
                <a href="compiler-plugins.html">
            
                    
                    编译器插件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.6" data-path="kapt.html">
            
                <a href="kapt.html">
            
                    
                    Kapt
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.7" data-path="kotlin-doc.html">
            
                <a href="kotlin-doc.html">
            
                    
                    Dokka
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.8" data-path="kotlin-osgi.html">
            
                <a href="kotlin-osgi.html">
            
                    
                    OSGi
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="evolution.html">
            
                <a href="evolution.html">
            
                    
                    演进
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.1" data-path="evolution/kotlin-evolution.html">
            
                <a href="evolution/kotlin-evolution.html">
            
                    
                    Kotlin 语言演进
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.2" data-path="evolution/components-stability.html">
            
                <a href="evolution/components-stability.html">
            
                    
                    不同组件的稳定性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.3" data-path="compatibility-guide-13.html">
            
                <a href="compatibility-guide-13.html">
            
                    
                    Kotlin 1.3 的兼容性指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.4" data-path="compatibility-guide-14.html">
            
                <a href="compatibility-guide-14.html">
            
                    
                    Kotlin 1.4 的兼容性指南
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="faq0.html">
            
                <a href="faq0.html">
            
                    
                    常见问题
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.1" data-path="faq.html">
            
                <a href="faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.2" data-path="comparison-to-java.html">
            
                <a href="comparison-to-java.html">
            
                    
                    与 Java 比较
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3" data-path="comparison-to-scala.html">
            
                <a href="comparison-to-scala.html">
            
                    
                    与 Scala 比较
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >1.4.30 的新特性</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <hr>
<p>type: doc
layout: reference</p>
<h2 id="title-whats-new-in-kotlin-1430">title: &quot;What&apos;s New in Kotlin 1.4.30&quot;</h2>
<h1 id="whats-new-in-kotlin-1430">What&apos;s New in Kotlin 1.4.30</h1>
<p>Kotlin 1.4.30 offers preview versions of new language features, promotes the new IR backend of the Kotlin/JVM compiler to
Beta, and ships various performance and functional improvements.</p>
<p>You can also learn about new features in <a href="http://blog.jetbrains.com/kotlin/2021/01/kotlin-1-4-30-released/" target="_blank">this blog post</a>.</p>
<p><a href="#language-features"><strong>Language features</strong></a></p>
<ul>
<li><a href="#jvm-records-support">JVM records support</a></li>
<li><a href="#sealed-interfaces">Sealed interfaces</a></li>
<li><a href="#package-wide-sealed-class-hierarchies">Package-wide sealed class hierarchies</a></li>
<li><a href="#improved-inline-classes">Improved inline classes</a></li>
</ul>
<p><a href="#kotlinjvm"><strong>Kotlin/JVM</strong></a></p>
<ul>
<li><a href="#jvm-ir-compiler-backend-reaches-beta">JVM IR compiler backend reaches Beta</a></li>
</ul>
<p><a href="#kotlinnative"><strong>Kotlin/Native</strong></a></p>
<ul>
<li><a href="#performance-improvements">Performance improvements</a></li>
<li><a href="#apple-watchos-64-bit-simulator-target">Apple watchOS 64-bit simulator target</a></li>
<li><a href="#support-for-xcode-122-libraries">Support for Xcode 12.2 libraries</a></li>
</ul>
<p><a href="#kotlinjs"><strong>Kotlin/JS</strong></a></p>
<ul>
<li><a href="#lazy-initialization-of-top-level-properties">Lazy initialization of top-level properties</a></li>
</ul>
<p><a href="#gradle-project-improvements"><strong>Gradle project improvements</strong></a></p>
<ul>
<li><a href="#support-the-gradle-configuration-cache">Support the Gradle configuration cache</a></li>
</ul>
<p><a href="#standard-library"><strong>Standard library</strong></a></p>
<ul>
<li><a href="#locale-agnostic-api-for-upperlowercasing-text">Locale-agnostic API for upper/lowercasing text</a></li>
<li><a href="#clear-char-to-code-and-char-to-digit-conversions">Clear Char-to-code and Char-to-digit conversions</a></li>
</ul>
<p><a href="#serialization-updates"><strong>Serialization updates</strong></a></p>
<ul>
<li><a href="#inline-classes-serialization-support">Inline classes serialization support</a></li>
<li><a href="#unsigned-primitive-type-serialization-support">Unsigned primitive type serialization support</a></li>
</ul>
<h2 id="language-features">Language features</h2>
<p>Kotlin 1.5.0 is going to deliver new language features &#x2013; JVM records support, sealed interfaces, and Stable inline classes.
In Kotlin 1.4.30, you can try these features and improvements in preview mode. We&#x2019;d be very grateful if you share your
feedback with us in the corresponding YouTrack tickets, as that will allow us to address it before the release of 1.5.0.</p>
<ul>
<li><a href="#jvm-records-support">JVM records support</a></li>
<li><a href="#sealed-interfaces">Sealed interfaces</a> and <a href="#package-wide-sealed-class-hierarchies">sealed class improvements</a></li>
<li><a href="#improved-inline-classes">Improved inline classes</a></li>
</ul>
<p>To enable these language features and improvements in preview mode, you need to opt in by adding specific compiler options.
See the sections below for details.</p>
<p>Learn more about the new features preview in <a href="https://blog.jetbrains.com/kotlin/2021/01/new-language-features-preview-in-kotlin-1-4-30" target="_blank">this blog post</a>.</p>
<h3 id="jvm-records-support">JVM records support</h3>
<blockquote>
<p>The JVM records feature is <a href="evolution/components-stability.html">Experimental</a>. It may be dropped or changed at any time.
Opt-in is required (see the details below), and you should use it only for evaluation purposes.  We would appreciate your feedback on it in <a href="https://youtrack.jetbrains.com/issue/KT-42430" target="_blank">YouTrack</a>.
{:.note}</p>
</blockquote>
<p>The <a href="https://openjdk.java.net/projects/jdk/16/" target="_blank">JDK 16 release</a> includes plans to stabilize a new Java class type called
<a href="https://openjdk.java.net/jeps/395" target="_blank">record</a>. To provide all the benefits of Kotlin and maintain its interoperability with Java,
Kotlin is introducing experimental record class support.</p>
<p>You can use record classes that are declared in Java just like classes with properties in Kotlin. No additional steps are required.</p>
<p>Starting with 1.4.30, you can declare the record class in Kotlin using the <code>@JvmRecord</code> annotation for a <a href="data-classes.html">data class</a>:</p>
<pre><code class="lang-kotlin">@JvmRecord
data <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span></span>(<span class="hljs-variable"><span class="hljs-keyword">val</span> name</span>: String, <span class="hljs-variable"><span class="hljs-keyword">val</span> age</span>: <span class="hljs-keyword">Int</span>)
</code></pre>
<p>To try the preview version of JVM records, add the compiler options <code>-Xjvm-enable-preview</code> and <code>-language-version 1.5</code>.</p>
<p>We&#x2019;re continuing to work on JVM records support and we&#x2019;d be very grateful if you would share your feedback with us using
this <a href="https://youtrack.jetbrains.com/issue/KT-42430" target="_blank">YouTrack ticket</a>.</p>
<p>Learn more about implementation, restrictions, and the syntax in <a href="https://github.com/Kotlin/KEEP/blob/master/proposals/jvm-records.md" target="_blank">KEEP</a>.</p>
<h3 id="sealed-interfaces">Sealed interfaces</h3>
<blockquote>
<p>Sealed interfaces are <a href="evolution/components-stability.html">Experimental</a>. They may be dropped or changed at any time.
Opt-in is required (see the details below), and you should use them only for evaluation purposes. We would appreciate your feedback on them in <a href="https://youtrack.jetbrains.com/issue/KT-42433" target="_blank">YouTrack</a>.
{:.note}</p>
</blockquote>
<p>In Kotlin 1.4.30, we&#x2019;re shipping the prototype of <em>sealed interfaces</em>. They complement sealed classes and make it possible
to build more flexible restricted class hierarchies.</p>
<p>They can serve as &#x201C;internal&#x201D; interfaces that cannot be implemented outside the same module. You can rely on that fact,
for example, to write exhaustive <code>when</code> expressions.</p>
<pre><code class="lang-kotlin">sealed interface Polygon

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Rectangle</span></span>(): Polygon
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Triangle</span></span>(): Polygon

<span class="hljs-comment">// when() is exhaustive: no other Polygon implementations can appear</span>
<span class="hljs-comment">// after the module is compiled</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">draw</span><span class="hljs-params">(polygon: <span class="hljs-type">Polygon</span>)</span> = <span class="hljs-title">when</span> <span class="hljs-params">(polygon)</span> {</span>
    <span class="hljs-keyword">is</span> Rectangle -&gt; <span class="hljs-comment">// ...</span>
    <span class="hljs-keyword">is</span> Triangle -&gt; <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>Another use-case: with sealed interfaces, you can inherit a class from two or more sealed superclasses.</p>
<pre><code class="lang-kotlin">sealed interface Fillable {
   <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fill</span><span class="hljs-params">()</span></span>
}
sealed interface Polygon {
   <span class="hljs-variable"><span class="hljs-keyword">val</span> vertices</span>: List<span class="hljs-type">&lt;Point&gt;</span>
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Rectangle</span></span>(<span class="hljs-keyword">override</span> <span class="hljs-variable"><span class="hljs-keyword">val</span> vertices</span>: List<span class="hljs-type">&lt;Point&gt;</span>): Fillable, Polygon {
   <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fill</span><span class="hljs-params">()</span> { <span class="hljs-comment">/*...*/</span> }</span>
}
</code></pre>
<p>To try the preview version of sealed interfaces, add the compiler option <code>-language-version 1.5</code>. Once you switch to this
version, you&#x2019;ll be able to use the <code>sealed</code> modifier on interfaces. We&#x2019;d be very grateful if you would share your feedback
with us using this <a href="https://youtrack.jetbrains.com/issue/KT-42433" target="_blank">YouTrack ticket</a>.</p>
<p><a href="sealed-classes.html#sealed-interfaces">Learn more about sealed interfaces</a>.</p>
<h3 id="package-wide-sealed-class-hierarchies">Package-wide sealed class hierarchies</h3>
<blockquote>
<p>Package-wide hierarchies of sealed classes are <a href="evolution/components-stability.html">Experimental</a>. They may be dropped or changed at any time.
Opt-in is required (see the details below), and you should use them only for evaluation purposes. We would appreciate your feedback on them in <a href="https://youtrack.jetbrains.com/issue/KT-42433" target="_blank">YouTrack</a>.
{:.note}</p>
</blockquote>
<p>Sealed classes can now form more flexible hierarchies. They can have subclasses in all files of the same compilation unit
and the same package. Previously, all subclasses had to appear in the same file.</p>
<p>Direct subclasses may be top-level or nested inside any number of other named classes, named interfaces, or named objects.
The subclasses of a sealed class must have a name that is properly qualified &#x2013; they cannot be local nor anonymous objects.</p>
<p>To try package-wide hierarchies of sealed classes, add the compiler option <code>-language-version 1.5</code>.
We&#x2019;d be very grateful if you would share your feedback with us using this <a href="https://youtrack.jetbrains.com/issue/KT-42433" target="_blank">YouTrack ticket</a>.</p>
<p><a href="sealed-classes.html#additional-location-the-same-package">Learn more about package-wide hierarchies of sealed classes</a>.</p>
<h3 id="improved-inline-classes">Improved inline classes</h3>
<blockquote>
<p>Inline value classes are in <a href="evolution/components-stability.html">Beta</a>. They are almost stable, but migration steps
may be required in the future. We&apos;ll do our best to minimize any changes you have to make. We would appreciate your
feedback on the inline classes feature in <a href="https://youtrack.jetbrains.com/issue/KT-42434" target="_blank">YouTrack</a>.
{:.note}</p>
</blockquote>
<p>Kotlin 1.4.30 promotes <a href="inline-classes.html">inline classes</a> to <a href="evolution/components-stability.html">Beta</a> and brings the following features and
improvements to them:</p>
<ul>
<li><p>Since inline classes are <a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/lang/doc-files/ValueBased.html" target="_blank">value-based</a>,
you can define them using the <code>value</code> modifier. The <code>inline</code> and <code>value</code> modifiers are now equivalent to each other.
In future Kotlin versions, we&#x2019;re planning to deprecate the <code>inline</code> modifier.</p>
<p>From now on, Kotlin requires the <code>@JvmInline</code> annotation before a class declaration for the JVM backend:</p>
</li>
</ul>
<pre><code class="lang-kotlin"><span class="hljs-keyword">inline</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Name</span></span>(<span class="hljs-keyword">private</span> <span class="hljs-variable"><span class="hljs-keyword">val</span> s</span>: String)

value <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Name</span></span>(<span class="hljs-keyword">private</span> <span class="hljs-variable"><span class="hljs-keyword">val</span> s</span>: String)

<span class="hljs-comment">// For JVM backends</span>
@JvmInline
value <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Name</span></span>(<span class="hljs-keyword">private</span> <span class="hljs-variable"><span class="hljs-keyword">val</span> s</span>: String)
</code></pre>
<ul>
<li>Inline classes can have <code>init</code> blocks. You can add code to be executed right after the class is instantiated:</li>
</ul>
<pre><code class="lang-kotlin"> @JvmInline
 value <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Negative</span></span>(<span class="hljs-variable"><span class="hljs-keyword">val</span> x</span>: <span class="hljs-keyword">Int</span>) {
   init {
       require(x <span class="hljs-type">&lt; 0) { }
   }
 }
</span></code></pre>
<ul>
<li>Calling functions with inline classes from Java code: before Kotlin 1.4.30, you couldn&apos;t call functions that accept
inline classes from Java because of mangling.
From now on, you can disable mangling manually. To call such functions from Java code, you should add the <code>@JvmName</code>
annotation before the function declaration:</li>
</ul>
<pre><code class="lang-kotlin"><span class="hljs-keyword">inline</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UInt</span></span>(<span class="hljs-variable"><span class="hljs-keyword">val</span> x</span>: <span class="hljs-keyword">Int</span>)

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">compute</span><span class="hljs-params">(x: <span class="hljs-type">Int</span>)</span> { }</span>

@JvmName(<span class="hljs-string">&quot;computeUInt&quot;</span>)
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">compute</span><span class="hljs-params">(x: <span class="hljs-type">UInt</span>)</span> { }</span>
</code></pre>
<ul>
<li><p>In this release, we&#x2019;ve changed the mangling scheme for functions to fix the incorrect behavior. These changes led to ABI changes.</p>
<p>Starting with 1.4.30, the Kotlin compiler uses a new mangling scheme by default. Use the <code>-Xuse-14-inline-classes-mangling-scheme</code>
compiler flag to force the compiler to use the old 1.4.0 mangling scheme and preserve binary compatibility.</p>
</li>
</ul>
<p>Kotlin 1.4.30 promotes inline classes to Beta, and we are planning to make them Stable in future releases. We&#x2019;d be very
grateful if you would share your feedback with us using this <a href="https://youtrack.jetbrains.com/issue/KT-42434" target="_blank">YouTrack ticket</a>.</p>
<p>To try the preview version of inline classes, add the compiler option <code>-Xinline-classes</code> or <code>-language-version 1.5</code>.</p>
<p>Learn more about the mangling algorithm in <a href="https://github.com/Kotlin/KEEP/blob/master/proposals/inline-classes.md" target="_blank">KEEP</a>.</p>
<p><a href="inline-classes.html">Learn more about inline classes</a>.</p>
<h2 id="kotlinjvm">Kotlin/JVM</h2>
<h3 id="jvm-ir-compiler-backend-reaches-beta">JVM IR compiler backend reaches Beta</h3>
<p>The <a href="whatsnew14.html#unified-backends-and-extensibility">IR-based compiler backend</a> for Kotlin/JVM, which was presented in
1.4.0 in <a href="evolution/components-stability.html">Alpha</a>, has reached Beta. This is the last pre-stable level before the IR
backend becomes the default for the Kotlin/JVM compiler.</p>
<p>We&#x2019;re now dropping the restriction on consuming binaries produced by the IR compiler. Previously, you could use code
compiled by the new JVM IR backend only if you had enabled the new backend. Starting from 1.4.30, there is no such limitation,
so you can use the new backend to build components for third-party use, such as libraries. Try the Beta version of the
new backend and share your feedback in our <a href="https://kotl.in/issue" target="_blank">issue tracker</a>.</p>
<p>To enable the new JVM IR backend, add the following lines to the project&#x2019;s configuration file:</p>
<ul>
<li>In Gradle:</li>
</ul>
<blockquote>
<p>Groovy DSL</p>
</blockquote>
<pre><code class="lang-groovy">tasks.withType(org.jetbrains.kotlin.gradle.dsl.KotlinJvmCompile) {
  kotlinOptions.useIR = <span class="hljs-literal">true</span>
}
</code></pre>
<blockquote>
<p>Kotlin DSL</p>
</blockquote>
<pre><code class="lang-kotlin">tasks.withType(org.jetbrains.kotlin.gradle.dsl.KotlinJvmCompile::<span class="hljs-class"><span class="hljs-keyword">class</span>) </span>{
  kotlinOptions.useIR = <span class="hljs-literal">true</span>
}
</code></pre>
<ul>
<li>In Maven:</li>
</ul>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">args</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">arg</span>&gt;</span>-Xuse-ir<span class="hljs-tag">&lt;/<span class="hljs-name">arg</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">args</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
</code></pre>
<p>Learn more about the changes that the JVM IR backend brings in <a href="https://blog.jetbrains.com/kotlin/2021/01/the-jvm-backend-is-in-beta-let-s-make-it-stable-together" target="_blank">this blog post</a>.</p>
<h2 id="kotlinnative">Kotlin/Native</h2>
<h3 id="performance-improvements">Performance improvements</h3>
<p>Kotlin/Native has received a variety of performance improvements in 1.4.30, which has resulted in faster compilation times.
For example, the time required to rebuild the framework in the <a href="https://github.com/kotlin-hands-on/kmm-networking-and-data-storage/tree/final" target="_blank">KMM Networking and Data Storage sample</a>
has decreased from 9.5 seconds (in 1.4.10) to 4.5 seconds (in 1.4.30).</p>
<h3 id="apple-watchos-64-bit-simulator-target">Apple watchOS 64-bit simulator target</h3>
<p>The x86 simulator target has been deprecated for watchOS since version 7.0. To keep up with the latest watchOS versions,
Kotlin/Native has the new target <code>watchosX64</code> for running the simulator on 64-bit architecture.</p>
<h3 id="support-for-xcode-122-libraries">Support for XCode 12.2 libraries</h3>
<p>We have added support for the new libraries delivered with Xcode 12.2. You can now use them from Kotlin code.</p>
<h2 id="kotlinjs">Kotlin/JS</h2>
<h3 id="lazy-initialization-of-top-level-properties">Lazy initialization of top-level properties</h3>
<blockquote>
<p>Lazy initialization of top-level properties is <a href="evolution/components-stability.html">Experimental</a>. It may be dropped or changed at any time.
Opt-in is required (see the details below), and you should use it only for evaluation purposes. We would appreciate your feedback on it in <a href="https://youtrack.jetbrains.com/issue/KT-44320" target="_blank">YouTrack</a>.
{:.note}</p>
</blockquote>
<p>The <a href="js-ir-compiler.html">IR backend</a> for Kotlin/JS is receiving a prototype implementation of lazy initialization for
top-level properties. This reduces the need to initialize all top-level properties when the application starts, and it
should significantly improve application start-up times.</p>
<p>We&#x2019;ll keep working on the lazy initialization, and we ask you to try the current prototype and share your thoughts and
results in this <a href="https://youtrack.jetbrains.com/issue/KT-44320" target="_blank">YouTrack ticket</a> or the <a href="https://kotlinlang.slack.com/archives/C0B8L3U69" target="_blank"><code>#javascript</code></a>
channel in the official <a href="https://kotlinlang.slack.com" target="_blank">Kotlin Slack</a> (get an invite <a href="https://surveys.jetbrains.com/s3/kotlin-slack-sign-up" target="_blank">here</a>).</p>
<p>To use the lazy initialization, add the <code>-Xir-property-lazy-initialization</code> compiler option when compiling the code with the JS IR compiler.</p>
<h2 id="gradle-project-improvements">Gradle project improvements</h2>
<h3 id="support-the-gradle-configuration-cache">Support the Gradle configuration cache</h3>
<p>Starting with 1.4.30, the Kotlin Gradle plugin supports the <a href="https://docs.gradle.org/current/userguide/configuration_cache.html" target="_blank">configuration cache</a>
feature. It speeds up the build process: once you run the command, Gradle executes the configuration phase and calculates
the task graph. Gradle caches the result and reuses it for subsequent builds.</p>
<p>To start using this feature, you can <a href="https://docs.gradle.org/current/userguide/configuration_cache.html#config_cache:usage" target="_blank">use the Gradle command</a>
or <a href="https://docs.gradle.org/current/userguide/configuration_cache.html#config_cache:ide:intellij" target="_blank">set up the IntelliJ based IDE</a>.</p>
<h2 id="standard-library">Standard library</h2>
<h3 id="locale-agnostic-api-for-upperlowercasing-text">Locale-agnostic API for upper/lowercasing text</h3>
<blockquote>
<p>The locale-agnostic API feature is <a href="evolution/components-stability.html">Experimental</a>. It may be dropped or changed at any time.
Use it only for evaluation purposes.
We would appreciate your feedback on it in <a href="https://youtrack.jetbrains.com/issue/KT-42437" target="_blank">YouTrack</a>.
{:.note}</p>
</blockquote>
<p>This release introduces the experimental locale-agnostic API for changing the case of strings and characters.
The current <code>toLowerCase()</code>, <code>toUpperCase()</code>, <code>capitalize()</code>, <code>decapitalize()</code> API functions are locale-sensitive.
This means that different platform locale settings can affect code behavior. For example, in the Turkish locale, when the
string &#x201C;kotlin&#x201D; is converted using <code>toUpperCase</code>, the result is &quot;KOTL&#x130;N&quot;, not &quot;KOTLIN&quot;.</p>
<pre><code class="lang-kotlin"><span class="hljs-comment">// current API</span>
println(<span class="hljs-string">&quot;Needs to be capitalized&quot;</span>.toUpperCase()) <span class="hljs-comment">// NEEDS TO BE CAPITALIZED</span>

<span class="hljs-comment">// new API</span>
println(<span class="hljs-string">&quot;Needs to be capitalized&quot;</span>.uppercase()) <span class="hljs-comment">// NEEDS TO BE CAPITALIZED</span>
</code></pre>
<p>Kotlin 1.4.30 provides the following alternatives:</p>
<ul>
<li>For <code>String</code> functions:</li>
</ul>
<table>
<thead>
<tr>
<th><strong>Earlier versions</strong></th>
<th><strong>1.4.30 alternative</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>String.toUpperCase()</code></td>
<td><code>String.uppercase()</code></td>
</tr>
<tr>
<td><code>String.toLowerCase()</code></td>
<td><code>String.lowercase()</code></td>
</tr>
<tr>
<td><code>String.capitalize()</code></td>
<td><code>String.replaceFirstChar { it.uppercase() }</code></td>
</tr>
<tr>
<td><code>String.decapitalize()</code></td>
<td><code>String.replaceFirstChar { it.lowercase() }</code></td>
</tr>
</tbody>
</table>
<ul>
<li>For <code>Char</code> functions:</li>
</ul>
<table>
<thead>
<tr>
<th><strong>Earlier versions</strong></th>
<th><strong>1.4.30 alternative</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Char.toUpperCase()</code></td>
<td><code>Char.uppercaseChar(): Char</code><br><code>Char.uppercase(): String</code></td>
</tr>
<tr>
<td><code>Char.toLowerCase()</code></td>
<td><code>Char.lowercaseChar(): Char</code><br><code>Char.lowercase(): String</code></td>
</tr>
<tr>
<td><code>Char.toTitleCase()</code></td>
<td><code>Char.titlecaseChar(): Char</code><br><code>Char.titlecase(): String</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p>For Kotlin/JVM, there are also overloaded <code>uppercase()</code>, <code>lowercase()</code>, and <code>titlecase()</code> functions with an explicit <code>Locale</code> parameter.
{:.note}</p>
</blockquote>
<p>See the full list of changes to the text processing functions in <a href="https://github.com/Kotlin/KEEP/blob/master/proposals/stdlib/locale-agnostic-string-conversions.md" target="_blank">KEEP</a>.</p>
<h3 id="clear-char-to-code-and-char-to-digit-conversions">Clear Char-to-code and Char-to-digit conversions</h3>
<blockquote>
<p>The unambiguous API for the <code>Char</code> conversion feature is <a href="evolution/components-stability.html">Experimental</a>. It may be dropped or changed at any time.
Use it only for evaluation purposes.
We would appreciate your feedback on it in <a href="https://youtrack.jetbrains.com/issue/KT-44333" target="_blank">YouTrack</a>.
{:.note}</p>
</blockquote>
<p>The current <code>Char</code> to numbers conversion functions, which return UTF-16 codes expressed in different numeric types,
are often confused with the similar String-to-Int conversion, which returns the numeric value of a string:</p>
<pre><code class="lang-kotlin"><span class="hljs-string">&quot;4&quot;</span>.toInt() <span class="hljs-comment">// returns 4</span>
&apos;<span class="hljs-number">4</span>&apos;.toInt() <span class="hljs-comment">// returns 52</span>
<span class="hljs-comment">// and there was no common function that would return the numeric value 4 for Char &apos;4&apos;</span>
</code></pre>
<p>To avoid this confusion we&apos;ve decided to separate <code>Char</code> conversions into two following sets of clearly named functions:</p>
<ul>
<li>Functions to get the integer code of <code>Char</code> and to construct <code>Char</code> from the given code:</li>
</ul>
<pre><code class="lang-kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">Char</span><span class="hljs-params">(code: <span class="hljs-type">Int</span>)</span>: <span class="hljs-keyword">Char</span></span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">Char</span><span class="hljs-params">(code: <span class="hljs-type">UShort</span>)</span>: <span class="hljs-keyword">Char</span></span>
<span class="hljs-variable"><span class="hljs-keyword">val</span> Char.code</span>: <span class="hljs-keyword">Int</span>
</code></pre>
<ul>
<li>Functions to convert <code>Char</code> to the numeric value of the digit it represents:</li>
</ul>
<pre><code class="lang-kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-keyword">Char</span>.<span class="hljs-title">digitToInt</span><span class="hljs-params">(radix: <span class="hljs-type">Int</span>)</span>: <span class="hljs-keyword">Int</span></span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-keyword">Char</span>.<span class="hljs-title">digitToIntOrNull</span><span class="hljs-params">(radix: <span class="hljs-type">Int</span>)</span>: <span class="hljs-keyword">Int</span>?</span>
</code></pre>
<ul>
<li>An extension function for <code>Int</code> to convert the non-negative single digit it represents to the corresponding <code>Char</code> representation:</li>
</ul>
<pre><code class="lang-kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-keyword">Int</span>.<span class="hljs-title">digitToChar</span><span class="hljs-params">(radix: <span class="hljs-type">Int</span>)</span>: <span class="hljs-keyword">Char</span></span>
</code></pre>
<p>See more details in <a href="https://github.com/Kotlin/KEEP/blob/master/proposals/stdlib/char-int-conversions.md" target="_blank">KEEP</a>.</p>
<h2 id="serialization-updates">Serialization updates</h2>
<p>Along with Kotlin 1.4.30, we are releasing <code>kotlinx.serialization</code> <a href="https://github.com/Kotlin/kotlinx.serialization/releases/tag/v1.1.0-RC" target="_blank">1.1.0-RC</a>,
which includes some new features:</p>
<ul>
<li>Inline classes serialization support</li>
<li>Unsigned primitive type serialization support</li>
</ul>
<h3 id="inline-classes-serialization-support">Inline classes serialization support</h3>
<p>Starting with Kotlin 1.4.30, you can make inline classes <a href="serialization.html">serializable</a>:</p>
<pre><code class="lang-kotlin">@Serializable
<span class="hljs-keyword">inline</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Color</span></span>(<span class="hljs-variable"><span class="hljs-keyword">val</span> rgb</span>: <span class="hljs-keyword">Int</span>)
</code></pre>
<blockquote>
<p>The feature requires the new 1.4.30 IR compiler.
{:.note}</p>
</blockquote>
<p>The serialization framework does not box serializable inline classes when they are used in other serializable classes.</p>
<p>Learn more in the <code>kotlinx.serialization</code> <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/inline-classes.md#serializable-inline-classes" target="_blank">docs</a>.</p>
<h3 id="unsigned-primitive-type-serialization-support">Unsigned primitive type serialization support</h3>
<p>Starting from 1.4.30, you can use standard JSON serializers of <a href="https://github.com/Kotlin/kotlinx.serialization" target="_blank">kotlinx.serialization</a>
for unsigned primitive types: <code>UInt</code>, <code>ULong</code>, <code>UByte</code>, and <code>UShort</code>:</p>
<pre><code class="lang-kotlin">@Serializable
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Counter</span></span>(<span class="hljs-variable"><span class="hljs-keyword">val</span> counted</span>: UByte, <span class="hljs-variable"><span class="hljs-keyword">val</span> description</span>: String)
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> {</span>
   <span class="hljs-variable"><span class="hljs-keyword">val</span> counted</span> = <span class="hljs-number">239.</span>toUByte()
   println(Json.encodeToString(Counter(counted, <span class="hljs-string">&quot;tries&quot;</span>)))
}
</code></pre>
<p>Learn more in the <code>kotlinx.serialization</code> <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/inline-classes.md#unsigned-types-support-json-only" target="_blank">docs</a>.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="whatsnew.html" class="navigation navigation-prev " aria-label="Previous page: 新特性">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="whatsnew-plugin-20203.html" class="navigation navigation-next " aria-label="Next page: Kotlin 插件 2020.3">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"1.4.30 的新特性","level":"1.3.1","depth":2,"next":{"title":"Kotlin 插件 2020.3","level":"1.3.2","depth":2,"path":"txt/whatsnew-plugin-20203.md","ref":"txt/whatsnew-plugin-20203.md","articles":[]},"previous":{"title":"新特性","level":"1.3","depth":1,"path":"txt/whatsnew.md","ref":"txt/whatsnew.md","articles":[{"title":"1.4.30 的新特性","level":"1.3.1","depth":2,"path":"txt/whatsnew1430.md","ref":"txt/whatsnew1430.md","articles":[]},{"title":"Kotlin 插件 2020.3","level":"1.3.2","depth":2,"path":"txt/whatsnew-plugin-20203.md","ref":"txt/whatsnew-plugin-20203.md","articles":[]},{"title":"1.4.20 的新特性","level":"1.3.3","depth":2,"path":"txt/whatsnew1420.md","ref":"txt/whatsnew1420.md","articles":[]},{"title":"1.4 的新特性","level":"1.3.4","depth":2,"path":"txt/whatsnew14.md","ref":"txt/whatsnew14.md","articles":[]},{"title":"1.3 的新特性","level":"1.3.5","depth":2,"path":"txt/whatsnew13.md","ref":"txt/whatsnew13.md","articles":[]},{"title":"1.2 的新特性","level":"1.3.6","depth":2,"path":"txt/whatsnew12.md","ref":"txt/whatsnew12.md","articles":[]},{"title":"1.1 的新特性","level":"1.3.7","depth":2,"path":"txt/whatsnew11.md","ref":"txt/whatsnew11.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["regexplace"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"regexplace":{"substitutes":[{"pattern":"<em>([^<]+)</em>\\{: ?\\.keyword\\ ?}","flags":"g","substitute":"<em><strong><code>$1</code></strong></em>"},{"pattern":"<p>\\{:#([^} ]+)\\}</p>","flags":"g","substitute":"<a name=\"$1\"></a>"},{"pattern":"\"/docs/tutorials/","flags":"g","substitute":"\"https://www.kotlincn.net/docs/tutorials/"},{"pattern":"\"/docs/diagnostics/","flags":"g","substitute":"\"https://www.kotlincn.net/docs/diagnostics/"},{"pattern":"\"/community/","flags":"g","substitute":"\"https://www.kotlincn.net/community/"}]},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":16,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"zh-hans","gitbook":"*"},"file":{"path":"txt/whatsnew1430.md","mtime":"2021-08-18T05:20:05.938Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-08-18T05:55:43.929Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>



<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Gradle 插件 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="debugging.html" />
    
    
    <link rel="prev" href="cocoapods.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    关于本书
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="../index0.html">
            
                <a href="../index0.html">
            
                    
                    语言指南
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../overview.html">
            
                <a href="../overview.html">
            
                    
                    概述
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../server-overview.html">
            
                <a href="../server-overview.html">
            
                    
                    Kotlin 用于服务器端开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../android-overview.html">
            
                <a href="../android-overview.html">
            
                    
                    Kotlin 用于 Android 开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../js-overview.html">
            
                <a href="../js-overview.html">
            
                    
                    Kotlin 用于 JavaScript 开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../native-overview.html">
            
                <a href="../native-overview.html">
            
                    
                    Kotlin 用于原生开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../data-science-overview.html">
            
                <a href="../data-science-overview.html">
            
                    
                    Kotlin 用于数据科学
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../coroutines-overview.html">
            
                <a href="../coroutines-overview.html">
            
                    
                    协程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="../multiplatform.html">
            
                <a href="../multiplatform.html">
            
                    
                    多平台
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../whatsnew.html">
            
                <a href="../whatsnew.html">
            
                    
                    新特性
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../whatsnew1430.html">
            
                <a href="../whatsnew1430.html">
            
                    
                    1.4.30 的新特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../whatsnew-plugin-20203.html">
            
                <a href="../whatsnew-plugin-20203.html">
            
                    
                    Kotlin 插件 2020.3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../whatsnew1420.html">
            
                <a href="../whatsnew1420.html">
            
                    
                    1.4.20 的新特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../whatsnew14.html">
            
                <a href="../whatsnew14.html">
            
                    
                    1.4 的新特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../whatsnew13.html">
            
                <a href="../whatsnew13.html">
            
                    
                    1.3 的新特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../whatsnew12.html">
            
                <a href="../whatsnew12.html">
            
                    
                    1.2 的新特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="../whatsnew11.html">
            
                <a href="../whatsnew11.html">
            
                    
                    1.1 的新特性
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../getting-started.html">
            
                <a href="../getting-started.html">
            
                    
                    开始
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../basic-syntax.html">
            
                <a href="../basic-syntax.html">
            
                    
                    基本语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../idioms.html">
            
                <a href="../idioms.html">
            
                    
                    习惯用法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../coding-conventions.html">
            
                <a href="../coding-conventions.html">
            
                    
                    编码规范
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../basics.html">
            
                <a href="../basics.html">
            
                    
                    基础
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../basic-types.html">
            
                <a href="../basic-types.html">
            
                    
                    基本类型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../packages.html">
            
                <a href="../packages.html">
            
                    
                    包
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../control-flow.html">
            
                <a href="../control-flow.html">
            
                    
                    控制流
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../returns.html">
            
                <a href="../returns.html">
            
                    
                    返回与跳转
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../classes-and-objects.html">
            
                <a href="../classes-and-objects.html">
            
                    
                    类与对象
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../classes.html">
            
                <a href="../classes.html">
            
                    
                    类与继承
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../properties.html">
            
                <a href="../properties.html">
            
                    
                    属性与字段
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../interfaces.html">
            
                <a href="../interfaces.html">
            
                    
                    接口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../fun-interfaces.html">
            
                <a href="../fun-interfaces.html">
            
                    
                    函数式（SAM）接口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../visibility-modifiers.html">
            
                <a href="../visibility-modifiers.html">
            
                    
                    可见性修饰符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../extensions.html">
            
                <a href="../extensions.html">
            
                    
                    扩展
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="../data-classes.html">
            
                <a href="../data-classes.html">
            
                    
                    数据类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="../sealed-classes.html">
            
                <a href="../sealed-classes.html">
            
                    
                    密封类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9" data-path="../generics.html">
            
                <a href="../generics.html">
            
                    
                    泛型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.10" data-path="../nested-classes.html">
            
                <a href="../nested-classes.html">
            
                    
                    嵌套类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.11" data-path="../enum-classes.html">
            
                <a href="../enum-classes.html">
            
                    
                    枚举类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.12" data-path="../object-declarations.html">
            
                <a href="../object-declarations.html">
            
                    
                    对象
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.13" data-path="../type-aliases.html">
            
                <a href="../type-aliases.html">
            
                    
                    类型别名
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.14" data-path="../inline-classes.html">
            
                <a href="../inline-classes.html">
            
                    
                    内联类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.15" data-path="../delegation.html">
            
                <a href="../delegation.html">
            
                    
                    委托
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.16" data-path="../delegated-properties.html">
            
                <a href="../delegated-properties.html">
            
                    
                    委托属性
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../functions-and-lambdas.html">
            
                <a href="../functions-and-lambdas.html">
            
                    
                    函数与 Lambda 表达式
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../functions.html">
            
                <a href="../functions.html">
            
                    
                    函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../lambdas.html">
            
                <a href="../lambdas.html">
            
                    
                    Lambda 表达式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../inline-functions.html">
            
                <a href="../inline-functions.html">
            
                    
                    内联函数
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../collections.html">
            
                <a href="../collections.html">
            
                    
                    集合
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../collections-overview.html">
            
                <a href="../collections-overview.html">
            
                    
                    集合概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../constructing-collections.html">
            
                <a href="../constructing-collections.html">
            
                    
                    构造集合
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../iterators.html">
            
                <a href="../iterators.html">
            
                    
                    迭代器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../ranges.html">
            
                <a href="../ranges.html">
            
                    
                    区间与数列
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="../sequences.html">
            
                <a href="../sequences.html">
            
                    
                    序列
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="../collection-operations.html">
            
                <a href="../collection-operations.html">
            
                    
                    操作概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7" data-path="../collection-transformations.html">
            
                <a href="../collection-transformations.html">
            
                    
                    转换
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.8" data-path="../collection-filtering.html">
            
                <a href="../collection-filtering.html">
            
                    
                    过滤
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.9" data-path="../collection-plus-minus.html">
            
                <a href="../collection-plus-minus.html">
            
                    
                    加减操作符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.10" data-path="../collection-grouping.html">
            
                <a href="../collection-grouping.html">
            
                    
                    分组
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.11" data-path="../collection-parts.html">
            
                <a href="../collection-parts.html">
            
                    
                    取集合的一部分
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.12" data-path="../collection-elements.html">
            
                <a href="../collection-elements.html">
            
                    
                    取单个元素
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.13" data-path="../collection-ordering.html">
            
                <a href="../collection-ordering.html">
            
                    
                    排序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.14" data-path="../collection-aggregate.html">
            
                <a href="../collection-aggregate.html">
            
                    
                    聚合操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.15" data-path="../collection-write.html">
            
                <a href="../collection-write.html">
            
                    
                    集合写操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.16" data-path="../list-operations.html">
            
                <a href="../list-operations.html">
            
                    
                    List 相关操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.17" data-path="../set-operations.html">
            
                <a href="../set-operations.html">
            
                    
                    Set 相关操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.18" data-path="../map-operations.html">
            
                <a href="../map-operations.html">
            
                    
                    Map 相关操作
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../coroutines.html">
            
                <a href="../coroutines.html">
            
                    
                    协程
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../coroutines/coroutines-guide.html">
            
                <a href="../coroutines/coroutines-guide.html">
            
                    
                    协程指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../coroutines/basics.html">
            
                <a href="../coroutines/basics.html">
            
                    
                    基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../coroutines/cancellation-and-timeouts.html">
            
                <a href="../coroutines/cancellation-and-timeouts.html">
            
                    
                    取消与超时
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="../coroutines/composing-suspending-functions.html">
            
                <a href="../coroutines/composing-suspending-functions.html">
            
                    
                    组合挂起函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="../coroutines/coroutine-context-and-dispatchers.html">
            
                <a href="../coroutines/coroutine-context-and-dispatchers.html">
            
                    
                    协程上下文与调度器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="../coroutines/flow.html">
            
                <a href="../coroutines/flow.html">
            
                    
                    异步流
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="../coroutines/channels.html">
            
                <a href="../coroutines/channels.html">
            
                    
                    通道
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.8" data-path="../coroutines/exception-handling.html">
            
                <a href="../coroutines/exception-handling.html">
            
                    
                    异常处理与监督
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.9" data-path="../coroutines/shared-mutable-state-and-concurrency.html">
            
                <a href="../coroutines/shared-mutable-state-and-concurrency.html">
            
                    
                    共享的可变状态与并发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.10" data-path="../coroutines/select-expression.html">
            
                <a href="../coroutines/select-expression.html">
            
                    
                    Select 表达式（实验性的）
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../multiplatform-programming.html">
            
                <a href="../multiplatform-programming.html">
            
                    
                    多平台程序设计
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../platform-specific-declarations.html">
            
                <a href="../platform-specific-declarations.html">
            
                    
                    平台相关声明
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../building-mpp-with-gradle.html">
            
                <a href="../building-mpp-with-gradle.html">
            
                    
                    以 Gradle 构建
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../mpp-dsl-reference.html">
            
                <a href="../mpp-dsl-reference.html">
            
                    
                    多平台 Gradle DSL 参考
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../other.html">
            
                <a href="../other.html">
            
                    
                    更多语言结构
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../multi-declarations.html">
            
                <a href="../multi-declarations.html">
            
                    
                    解构声明
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="../typecasts.html">
            
                <a href="../typecasts.html">
            
                    
                    类型检测与转换
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="../this-expressions.html">
            
                <a href="../this-expressions.html">
            
                    
                    This 表达式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.4" data-path="../equality.html">
            
                <a href="../equality.html">
            
                    
                    相等性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.5" data-path="../operator-overloading.html">
            
                <a href="../operator-overloading.html">
            
                    
                    操作符重载
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.6" data-path="../null-safety.html">
            
                <a href="../null-safety.html">
            
                    
                    空安全
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.7" data-path="../exceptions.html">
            
                <a href="../exceptions.html">
            
                    
                    异常
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.8" data-path="../annotations.html">
            
                <a href="../annotations.html">
            
                    
                    注解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.9" data-path="../reflection.html">
            
                <a href="../reflection.html">
            
                    
                    反射
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.10" data-path="../serialization.html">
            
                <a href="../serialization.html">
            
                    
                    序列化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.11" data-path="../scope-functions.html">
            
                <a href="../scope-functions.html">
            
                    
                    作用域函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.12" data-path="../type-safe-builders.html">
            
                <a href="../type-safe-builders.html">
            
                    
                    类型安全的构建器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.13" data-path="../opt-in-requirements.html">
            
                <a href="../opt-in-requirements.html">
            
                    
                    选择加入要求
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../corelibs.html">
            
                <a href="../corelibs.html">
            
                    
                    核心库
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../../reflink.html">
            
                <a href="../../reflink.html">
            
                    
                    标准库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../../testlink.html">
            
                <a href="../../testlink.html">
            
                    
                    kotlin.test
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../reference0.html">
            
                <a href="../reference0.html">
            
                    
                    参考
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="../keyword-reference.html">
            
                <a href="../keyword-reference.html">
            
                    
                    关键字与操作符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="../grammar.html">
            
                <a href="../grammar.html">
            
                    
                    语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="../code-style-migration-guide.html">
            
                <a href="../code-style-migration-guide.html">
            
                    
                    编码风格约定
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="../interop.html">
            
                <a href="../interop.html">
            
                    
                    Java 互操作
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="../java-interop.html">
            
                <a href="../java-interop.html">
            
                    
                    Kotlin 中调用 Java
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="../java-to-kotlin-interop.html">
            
                <a href="../java-to-kotlin-interop.html">
            
                    
                    Java 中调用 Kotlin
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="../javascript.html">
            
                <a href="../javascript.html">
            
                    
                    JavaScript
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="../js-project-setup.html">
            
                <a href="../js-project-setup.html">
            
                    
                    搭建项目
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="../dynamic-type.html">
            
                <a href="../dynamic-type.html">
            
                    
                    动态类型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.3" data-path="../js-interop.html">
            
                <a href="../js-interop.html">
            
                    
                    Kotlin 中调用 JavaScript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.4" data-path="../js-to-kotlin-interop.html">
            
                <a href="../js-to-kotlin-interop.html">
            
                    
                    JavaScript 中调用 Kotlin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5" data-path="../js-modules.html">
            
                <a href="../js-modules.html">
            
                    
                    JavaScript 模块
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.6" data-path="../js-reflection.html">
            
                <a href="../js-reflection.html">
            
                    
                    JavaScript 反射
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.7" data-path="../javascript-dce.html">
            
                <a href="../javascript-dce.html">
            
                    
                    JavaScript DCE
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8" data-path="../js-ir-compiler.html">
            
                <a href="../js-ir-compiler.html">
            
                    
                    IR 编译器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.9" data-path="../js-external-declarations-with-dukat.html">
            
                <a href="../js-external-declarations-with-dukat.html">
            
                    
                    用 Dukat 生成外部声明
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="../native.html">
            
                <a href="../native.html">
            
                    
                    原生
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="concurrency.html">
            
                <a href="concurrency.html">
            
                    
                    并发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2" data-path="immutability.html">
            
                <a href="immutability.html">
            
                    
                    不可变性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3" data-path="libraries.html">
            
                <a href="libraries.html">
            
                    
                    Kotlin 库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.4" data-path="platform_libs.html">
            
                <a href="platform_libs.html">
            
                    
                    平台库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.5" data-path="c_interop.html">
            
                <a href="c_interop.html">
            
                    
                    与 C 语言互操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.6" data-path="objc_interop.html">
            
                <a href="objc_interop.html">
            
                    
                    与 Objective-C 及 Swift 互操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.7" data-path="cocoapods.html">
            
                <a href="cocoapods.html">
            
                    
                    CocoaPods 集成
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.16.8" data-path="gradle_plugin.html">
            
                <a href="gradle_plugin.html">
            
                    
                    Gradle 插件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.9" data-path="debugging.html">
            
                <a href="debugging.html">
            
                    
                    调试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.10" data-path="faq.html">
            
                <a href="faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="../tools.html">
            
                <a href="../tools.html">
            
                    
                    工具
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.1" data-path="../using-gradle.html">
            
                <a href="../using-gradle.html">
            
                    
                    Gradle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2" data-path="../using-maven.html">
            
                <a href="../using-maven.html">
            
                    
                    Maven
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3" data-path="../using-ant.html">
            
                <a href="../using-ant.html">
            
                    
                    Ant
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.4" data-path="../compiler-reference.html">
            
                <a href="../compiler-reference.html">
            
                    
                    编译器选项
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5" data-path="../compiler-plugins.html">
            
                <a href="../compiler-plugins.html">
            
                    
                    编译器插件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.6" data-path="../kapt.html">
            
                <a href="../kapt.html">
            
                    
                    Kapt
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.7" data-path="../kotlin-doc.html">
            
                <a href="../kotlin-doc.html">
            
                    
                    Dokka
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.8" data-path="../kotlin-osgi.html">
            
                <a href="../kotlin-osgi.html">
            
                    
                    OSGi
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="../evolution.html">
            
                <a href="../evolution.html">
            
                    
                    演进
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.1" data-path="../evolution/kotlin-evolution.html">
            
                <a href="../evolution/kotlin-evolution.html">
            
                    
                    Kotlin 语言演进
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.2" data-path="../evolution/components-stability.html">
            
                <a href="../evolution/components-stability.html">
            
                    
                    不同组件的稳定性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.3" data-path="../compatibility-guide-13.html">
            
                <a href="../compatibility-guide-13.html">
            
                    
                    Kotlin 1.3 的兼容性指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.4" data-path="../compatibility-guide-14.html">
            
                <a href="../compatibility-guide-14.html">
            
                    
                    Kotlin 1.4 的兼容性指南
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="../faq0.html">
            
                <a href="../faq0.html">
            
                    
                    常见问题
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.1" data-path="../faq.html">
            
                <a href="../faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.2" data-path="../comparison-to-java.html">
            
                <a href="../comparison-to-java.html">
            
                    
                    与 Java 比较
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3" data-path="../comparison-to-scala.html">
            
                <a href="../comparison-to-scala.html">
            
                    
                    与 Scala 比较
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Gradle 插件</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="kotlinnative-gradle-&#x63D2;&#x4EF6;">Kotlin/Native Gradle &#x63D2;&#x4EF6;</h1>
<p>Since 1.3.40, a separate Gradle plugin for Kotlin/Native is deprecated in favor of the <code>kotlin-multiplatform</code> plugin.
This plugin provides an IDE support along with support of the new multiplatform project model introduced in Kotlin 1.3.0.
Below you can find a short list of differences between <code>kotlin-platform-native</code> and <code>kotlin-muliplatform</code> plugins. 
For more information see the <code>kotlin-muliplatform</code> <a href="https://kotlinlang.org/docs/reference/building-mpp-with-gradle.html" target="_blank">documentation page</a>.
For <code>kotlin-platform-native</code> reference see the <a href="#kotlin-platform-native-reference">corresponding section</a>.</p>
<h3 id="applying-the-multiplatform-plugin">Applying the multiplatform plugin</h3>
<p>To apply the <code>kotlin-multiplatform</code> plugin, just add the following snippet into your build script:</p>
<blockquote>
<p>Groovy DSL</p>
</blockquote>
<pre><code class="lang-groovy">plugins {
    id(<span class="hljs-string">&quot;org.jetbrains.kotlin.multiplatform&quot;</span>) version <span class="hljs-string">&apos;1.3.40&apos;</span>
}
</code></pre>
<h3 id="managing-targets">Managing targets</h3>
<p>With the <code>kotlin-platform-native</code> plugin a set of target platforms is specified as a list in properties of the main component:</p>
<blockquote>
<p>Groovy DSL</p>
</blockquote>
<pre><code class="lang-groovy">components.main {
    targets = [<span class="hljs-string">&apos;macos_x64&apos;</span>, <span class="hljs-string">&apos;linux_x64&apos;</span>, <span class="hljs-string">&apos;mingw_x64&apos;</span>]
}
</code></pre>
<p>With the <code>kotlin-multiplatform</code> plugin target platforms can be added into a project using special methods available in the <code>kotlin</code> extension.
Each method adds into a project one <strong>target</strong> which can be accessed using the <code>targets</code> property. Each target can be configured independently
including output kinds, additional compiler options etc. See details about targets at the <a href="https://kotlinlang.org/docs/reference/building-mpp-with-gradle.html#setting-up-targets" target="_blank">corresponding page</a>.</p>
<blockquote>
<p>Groovy DSL</p>
</blockquote>
<pre><code class="lang-groovy"><span class="hljs-keyword">import</span> org.jetbrains.kotlin.gradle.plugin.mpp.KotlinNativeTarget

kotlin {
    <span class="hljs-comment">// These targets are declared without any target-specific settings. </span>
    macosX64()
    linuxX64()

    <span class="hljs-comment">// You can specify a custom name used to access the target.</span>
    mingwX64(<span class="hljs-string">&quot;windows&quot;</span>) 

    iosArm64 {
        <span class="hljs-comment">// Additional settings for ios_arm64.</span>
    }

    <span class="hljs-comment">// You can access declared targets using the `targets` property.</span>
    println(targets.macosX64)
    println(targets.windows)

    <span class="hljs-comment">// You also can configure all native targets in a single block.</span>
    targets.withType(KotlinNativeTarget) {
        <span class="hljs-comment">// Native target configuration.</span>
    }
}
</code></pre>
<p>Each target includes two <strong>compilations</strong>: <code>main</code> and <code>test</code> compiling product and test sources respectively. A compilation is an abstraction
over a compiler invocation and described at the <a href="https://kotlinlang.org/docs/reference/building-mpp-with-gradle.html#configuring-compilations" target="_blank">corresponding page</a>.</p>
<h3 id="managing-sources">Managing sources</h3>
<p>With the <code>kotlin-platform-native</code> plugin source sets are used to separate test and product sources. Also you can specify different sources
for different platforms in the same source set:</p>
<blockquote>
<p>Groovy DSL</p>
</blockquote>
<pre><code class="lang-groovy">sourceSets {
    <span class="hljs-comment">// Adding target-independent sources.</span>
    main.kotlin.srcDirs += <span class="hljs-string">&apos;src/main/mySources&apos;</span>

    <span class="hljs-comment">// Adding Linux-specific code.</span>
    main.target(<span class="hljs-string">&apos;linux_x64&apos;</span>).srcDirs += <span class="hljs-string">&apos;src/main/linux&apos;</span>
}
</code></pre>
<p>With the <code>kotlin-multiplatform</code> plugin <strong>source</strong> <strong>sets</strong> are also used to group sources but source files for different platforms are located in different source sets.
For each declared target two source sets are created: <code>&lt;target-name&gt;Main</code> and <code>&lt;target-name&gt;Test</code> containing product and test sources for this platform. Common for all
platforms sources are located in <code>commonMain</code> and <code>commonTest</code> source sets created by default. More information about source sets can be found
<a href="https://kotlinlang.org/docs/reference/building-mpp-with-gradle.html#configuring-source-sets" target="_blank">here</a>.</p>
<blockquote>
<p>Groovy DSL</p>
</blockquote>
<pre><code class="lang-groovy">kotlin {
    sourceSets {
        <span class="hljs-comment">// Adding target-independent sources.</span>
        commonMain.kotlin.srcDirs += file(<span class="hljs-string">&quot;src/main/mySources&quot;</span>)

        <span class="hljs-comment">// Adding Linux-specific code.</span>
        linuxX64Main.kotlin.srcDirs += file(<span class="hljs-string">&quot;src/main/linux&quot;</span>)
    }
}
</code></pre>
<h3 id="managing-dependencies">Managing dependencies</h3>
<p>With the <code>kotlin-platform-native</code> plugin dependencies are configured in a traditional for Gradle way by grouping them into configurations
using the project <code>dependencies</code> block:</p>
<blockquote>
<p>Groovy DSL</p>
</blockquote>
<pre><code class="lang-groovy">dependencies {
    implementation <span class="hljs-string">&apos;org.sample.test:mylibrary:1.0&apos;</span>
    testImplementation <span class="hljs-string">&apos;org.sample.test:testlibrary:1.0&apos;</span>
}
</code></pre>
<p>The <code>kotlin-multiplatform</code> plugin also uses configurations under the hood but it also provides a <code>dependencies</code> block for each source set
allowing configuring dependencies of this sources set:</p>
<blockquote>
<p>Groovy DSL</p>
</blockquote>
<pre><code class="lang-groovy">kotlin.sourceSets {
    commonMain {
        dependencies {
            implementation(<span class="hljs-string">&quot;org.sample.test:mylibrary:1.0&quot;</span>)
        }
    }

    commonTest {
        dependencies {
            implementation(<span class="hljs-string">&quot;org.sample.test:testlibrary:1.0&quot;</span>)
        }
    }
}
</code></pre>
<p>Note that a module referenced by a dependency declared for <code>commonMain</code> or <code>commonTest</code> source set must be published using the <code>kotlin-multiplatform</code> plugin.
If you want to use libraries published by the <code>kotlin-platform-native</code> plugin, you need to declare a separate source set for common native sources.</p>
<blockquote>
<p>Groovy DSL</p>
</blockquote>
<pre><code class="lang-groovy">kotlin.sourceSets {
    <span class="hljs-comment">// Create a common source set used by native targets only.</span>
    nativeMain {
        dependsOn(commonMain)
        dependencies {
            <span class="hljs-comment">// Depend on a library published by the kotlin-platform-naive plugin.</span>
            implementation(<span class="hljs-string">&quot;org.sample.test:mylibrary:1.0&quot;</span>)
        }
    }

    <span class="hljs-comment">// Configure all native platform sources sets to use it as a common one.</span>
    linuxX64Main.dependsOn(nativeMain)
    macosX64Main.dependsOn(nativeMain)
    <span class="hljs-comment">//...</span>
}
</code></pre>
<p>See more info about dependencies at the <a href="https://kotlinlang.org/docs/reference/building-mpp-with-gradle.html#adding-dependencies" target="_blank">corresponding page</a>.</p>
<h3 id="output-kinds">Output kinds</h3>
<p>With the <code>kotlin-platform-native</code> plugin output kinds are specified as a list in properties of a component:</p>
<blockquote>
<p>Groovy DSL</p>
</blockquote>
<pre><code class="lang-groovy">components.main {
    <span class="hljs-comment">// Compile the component into an executable and a Kotlin/Native library.</span>
    outputKinds = [EXECUTABLE, KLIBRARY]
}
</code></pre>
<p>With the <code>kotlin-multiplatform</code> plugin a compilation always produces a <code>*.klib</code> file. A separate <code>binaries</code> block is used to configure what
final native binaries should be produced by each target. Each binary can be configured independently including linker options, executable entry point etc.</p>
<blockquote>
<p>Groovy DSL</p>
</blockquote>
<pre><code class="lang-groovy">kotlin {
    macosX64 {
        binaries {
            executable {
                <span class="hljs-comment">// Binary configuration: linker options, name, etc.</span>
            }
            framework {
                <span class="hljs-comment">// ...</span>
            }

        }
    }
}
</code></pre>
<p>See more about native binaries declaration at the <a href="https://kotlinlang.org/docs/reference/building-mpp-with-gradle.html#building-final-native-binaries" target="_blank">corresponding page</a>.</p>
<h3 id="publishing">Publishing</h3>
<p>Both <code>kotlin-platform-native</code> and <code>kotlin-multiplatform</code> plugins automatically set up artifact publication when the
<code>maven-publish</code> plugin is applied. See details about publication at the <a href="https://kotlinlang.org/docs/reference/building-mpp-with-gradle.html#publishing-a-multiplatform-library" target="_blank">corresponding page</a>.
Note that currently only Kotlin/Native libraries (<code>*.klib</code>) can be published for native targets.</p>
<h3 id="cinterop-support">Cinterop support</h3>
<p>With the <code>kotlin-platform-native</code> plugin interop with a native library can be declared in component dependencies:</p>
<blockquote>
<p>Groovy DSL</p>
</blockquote>
<pre><code class="lang-groovy">components.main {
    dependencies {
        cinterop(<span class="hljs-string">&apos;mystdio&apos;</span>) {
            <span class="hljs-comment">// Cinterop configuration.</span>
        }
    }
}
</code></pre>
<p>With the <code>kotlin-multiplatform</code> plugin interops are configured as a part of a compilation (see details <a href="https://kotlinlang.org/docs/reference/building-mpp-with-gradle.html#cinterop-support" target="_blank">here</a>).
The rest of an interop configuration is the same as for the <code>kotlin-platform-native</code> plugin.</p>
<blockquote>
<p>Groovy DSL</p>
</blockquote>
<pre><code class="lang-groovy">kotlin {
    macosX64 {
        compilations.main.cinterops {
            mystdio {
                <span class="hljs-comment">// Cinterop configuration.</span>
            }
        }
    }
}
</code></pre>
<h2 id="kotlin-platform-native-reference"><code>kotlin-platform-native</code> reference</h2>
<h3 id="overview">Overview</h3>
<p>You may use the Gradle plugin to build <em>Kotlin/Native</em> projects. Builds of the plugin are
<a href="https://plugins.gradle.org/plugin/org.jetbrains.kotlin.platform.native" target="_blank">available</a> at the Gradle plugin portal, so you can apply it
using Gradle plugin DSL:</p>
<pre><code class="lang-groovy">plugins {
    id <span class="hljs-string">&quot;org.jetbrains.kotlin.platform.native&quot;</span> version <span class="hljs-string">&quot;1.3.0-rc-146&quot;</span>
}
</code></pre>
<p>You also can get the plugin from a Bintray repository. In addition to releases, this repo contains old and development
versions of the plugin which are not available at the plugin portal. To get the plugin from the Bintray repo, include
the following snippet in your build script:</p>
<pre><code class="lang-groovy">buildscript {
   repositories {
       mavenCentral()
       maven {
           url <span class="hljs-string">&quot;https://dl.bintray.com/jetbrains/kotlin-native-dependencies&quot;</span>
       }
   }

   dependencies {
       classpath <span class="hljs-string">&quot;org.jetbrains.kotlin:kotlin-native-gradle-plugin:1.3.0-rc-146&quot;</span>
   }
}

apply <span class="hljs-string">plugin:</span> <span class="hljs-string">&apos;org.jetbrains.kotlin.platform.native&apos;</span>
</code></pre>
<p>By default the plugin downloads the Kotlin/Native compiler during the first run. If you have already downloaded the compiler
manually you can specify the path to its root directory using <code>org.jetbrains.kotlin.native.home</code> project property (e.g. in <code>gradle.properties</code>).</p>
<pre><code class="lang-groovy">org.jetbrains.kotlin.native.home=<span class="hljs-regexp">/home/</span>user/kotlin-native<span class="hljs-number">-0.8</span>
</code></pre>
<p>In this case the compiler will not be downloaded by the plugin.</p>
<h3 id="source-management">Source management</h3>
<p>Source management in the <code>kotlin.platform.native</code> plugin is uniform with other Kotlin plugins and is based on source sets.
A source set is a group of Kotlin/Native source which may contain both common and platform-specific code. The plugin
provides a top-level script block <code>sourceSets</code> allowing you to configure source sets. Also it creates the default
source sets <code>main</code> and <code>test</code> (for production and test code respectively).</p>
<p>By default the production sources are located in <code>src/main/kotlin</code> and the test sources - in <code>src/test/kotlin</code>.</p>
<pre><code class="lang-groovy">sourceSets {
    <span class="hljs-comment">// Adding target-independent sources.</span>
    main.kotlin.srcDirs += <span class="hljs-string">&apos;src/main/mySources&apos;</span>

    <span class="hljs-comment">// Adding Linux-specific code. It will be compiled in Linux binaries only.</span>
    main.target(<span class="hljs-string">&apos;linux_x64&apos;</span>).srcDirs += <span class="hljs-string">&apos;src/main/linux&apos;</span>
}
</code></pre>
<h3 id="targets-and-output-kinds">Targets and output kinds</h3>
<p>By default the plugin creates software components for the main and test source sets. You can access them via the
<code>components</code> container provided by Gradle or via the <code>component</code> property of a corresponding source set:</p>
<pre><code class="lang-groovy"><span class="hljs-comment">// Main component.</span>
components.main
sourceSets.main.component

<span class="hljs-comment">// Test component.</span>
components.test
sourceSets.test.component
</code></pre>
<p>Components allow you to specify:</p>
<ul>
<li>Targets (e.g. Linux/x64 or iOS/arm64 etc)</li>
<li>Output kinds (e.g. executable, library, framework etc)</li>
<li>Dependencies (including interop ones)</li>
</ul>
<p>Targets can be specified by setting a corresponding component property:</p>
<pre><code class="lang-groovy">components.main {
    <span class="hljs-comment">// Compile this component for 64-bit MacOS, Linux and Windows.</span>
    targets = [<span class="hljs-string">&apos;macos_x64&apos;</span>, <span class="hljs-string">&apos;linux_x64&apos;</span>, <span class="hljs-string">&apos;mingw_x64&apos;</span>]
}
</code></pre>
<p>The plugin uses the same notation as the compiler. By default, test component uses the same targets as specified for the main one.</p>
<p>Output kinds can also be specified using a special property:</p>
<pre><code class="lang-groovy">components.main {
    <span class="hljs-comment">// Compile the component into an executable and a Kotlin/Native library.</span>
    outputKinds = [EXECUTABLE, KLIBRARY]
}
</code></pre>
<p>All constants used here are available inside a component configuration script block.
The plugin supports producing binaries of the following kinds:</p>
<ul>
<li><code>EXECUTABLE</code> - an executable file;</li>
<li><code>KLIBRARY</code> - a Kotlin/Native library (*.klib);</li>
<li><code>FRAMEWORK</code> - an Objective-C framework;</li>
<li><code>DYNAMIC</code> - shared native library;</li>
<li><code>STATIC</code> - static native library.</li>
</ul>
<p>Also each native binary is built in two variants (build types): <code>debug</code> (debuggable, not optimized) and <code>release</code> (not debuggable, optimized).
Note that Kotlin/Native libraries have only <code>debug</code> variant because optimizations are preformed only during compilation
of a final binary (executable, static lib etc) and affect all libraries used to build it.</p>
<h3 id="compile-tasks">Compile tasks</h3>
<p>The plugin creates a compilation task for each combination of the target, output kind, and build type. The tasks have the following naming convention:</p>
<pre><code>compile&lt;ComponentName&gt;&lt;BuildType&gt;&lt;OutputKind&gt;&lt;Target&gt;KotlinNative
</code></pre><p>For example <code>compileDebugKlibraryMacos_x64KotlinNative</code>, <code>compileTestDebugKotlinNative</code>.</p>
<p>The name contains the following parts (some of them may be empty):</p>
<ul>
<li><code>&lt;ComponentName&gt;</code> - name of a component. Empty for the main component.</li>
<li><code>&lt;BuildType&gt;</code> - <code>Debug</code> or <code>Release</code>.</li>
<li><code>&lt;OutputKind&gt;</code> - output kind name, e.g. <code>Executabe</code> or <code>Dynamic</code>. Empty if the component has only one output kind.</li>
<li><code>&lt;Target&gt;</code> - target the component is built for, e.g. <code>Macos_x64</code> or <code>Wasm32</code>. Empty if the component is built only for one target.</li>
</ul>
<p>Also the plugin creates a number of aggregate tasks allowing you to build all the binaries for a build type (e.g.
<code>assembleAllDebug</code>) or all the binaries for a particular target (e.g. <code>assembleAllWasm32</code>).</p>
<p>Basic lifecycle tasks like <code>assemble</code>, <code>build</code>, and <code>clean</code> are also available.</p>
<h3 id="running-tests">Running tests</h3>
<p>The plugin builds a test executable for all the targets specified for the <code>test</code> component. If the current host platform is
included in this list the test running tasks are also created. To run tests, execute the standard lifecycle <code>check</code> task:</p>
<pre><code class="lang-bash">./gradlew check
</code></pre>
<h3 id="dependencies">Dependencies</h3>
<p>The plugin allows you to declare dependencies on files and other projects using traditional Gradle&apos;s mechanism of
configurations. The plugin supports Kotlin multiplatform projects allowing you to declare the <code>expectedBy</code> dependencies</p>
<pre><code class="lang-groovy">dependencies {
    implementation files(<span class="hljs-string">&apos;path/to/file/dependencies&apos;</span>)
    implementation project(<span class="hljs-string">&apos;library&apos;</span>)
    testImplementation project(<span class="hljs-string">&apos;testLibrary&apos;</span>)
    expectedBy project(<span class="hljs-string">&apos;common&apos;</span>)
}
</code></pre>
<p>It&apos;s possible to depend on a Kotlin/Native library published earlier in a maven repo. The plugin relies on Gradle&apos;s
<a href="https://github.com/gradle/gradle/blob/master/subprojects/docs/src/docs/design/gradle-module-metadata-specification.md" target="_blank">metadata</a>
support so the corresponding feature must be enabled. Add the following line in your <code>settings.gradle</code>:</p>
<pre><code class="lang-groovy">enableFeaturePreview(<span class="hljs-string">&apos;GRADLE_METADATA&apos;</span>)
</code></pre>
<p>Now you can declare a dependency on a Kotlin/Native library in the traditional <code>group:artifact:version</code> notation:</p>
<pre><code class="lang-groovy">dependencies {
    implementation <span class="hljs-string">&apos;org.sample.test:mylibrary:1.0&apos;</span>
    testImplementation <span class="hljs-string">&apos;org.sample.test:testlibrary:1.0&apos;</span>
}
</code></pre>
<p>Dependency declaration is also possible in the component block:</p>
<pre><code class="lang-groovy">components.main {
    dependencies {
        implementation <span class="hljs-string">&apos;org.sample.test:mylibrary:1.0&apos;</span>
    }
}

components.test {
    dependencies {
        implementation <span class="hljs-string">&apos;org.sample.test:testlibrary:1.0&apos;</span>
    }
}
</code></pre>
<h3 id="using-cinterop">Using cinterop</h3>
<p>It&apos;s possible to declare a cinterop dependency for a component:</p>
<pre><code class="lang-groovy">components.main {
    dependencies {
        cinterop(<span class="hljs-string">&apos;mystdio&apos;</span>) {
            <span class="hljs-comment">// src/main/c_interop/mystdio.def is used as a def file.</span>

            <span class="hljs-comment">// Set up compiler options</span>
            compilerOpts <span class="hljs-string">&apos;-I/my/include/path&apos;</span>

            <span class="hljs-comment">// It&apos;s possible to set up different options for different targets</span>
            target(<span class="hljs-string">&apos;linux&apos;</span>) {
                compilerOpts <span class="hljs-string">&apos;-I/linux/include/path&apos;</span>
            }
        }
    }
}
</code></pre>
<p>Here an interop library will be built and added in the component dependencies.</p>
<p>Often it&apos;s necessary to specify target-specific linker options for a Kotlin/Native binary using an interop. It can be
done using the <code>target</code> script block:</p>
<pre><code class="lang-groovy">components.main {
    target(<span class="hljs-string">&apos;linux&apos;</span>) {
        linkerOpts <span class="hljs-string">&apos;-L/path/to/linux/libs&apos;</span>
    }
}
</code></pre>
<p>Also the <code>allTargets</code> block is available.</p>
<pre><code class="lang-groovy">components.main {
    <span class="hljs-comment">// Configure all targets.</span>
    allTargets {
        linkerOpts <span class="hljs-string">&apos;-L/path/to/libs&apos;</span>
    }
}
</code></pre>
<h3 id="publishing">Publishing</h3>
<p>In the presence of <code>maven-publish</code> plugin the publications for all the binaries built are created. The plugin uses Gradle
metadata to publish the artifacts so this feature must be enabled (see the <a href="#dependencies">dependencies</a> section).</p>
<p>Now you can publish the artifacts with the standard Gradle <code>publish</code> task:</p>
<pre><code class="lang-bash">./gradlew publish
</code></pre>
<p>Only <code>EXECUTABLE</code> and <code>KLIBRARY</code> binaries are published currently.</p>
<p>The plugin allows you to customize the pom generated for the publication with the <code>pom</code> code block available for every component:</p>
<pre><code class="lang-groovy">components.main {
    pom {
        withXml {
            <span class="hljs-keyword">def</span> root = asNode()
            root.appendNode(<span class="hljs-string">&apos;name&apos;</span>, <span class="hljs-string">&apos;My library&apos;</span>)
            root.appendNode(<span class="hljs-string">&apos;description&apos;</span>, <span class="hljs-string">&apos;A Kotlin/Native library&apos;</span>)
        }
    }
}
</code></pre>
<h3 id="serialization-plugin">Serialization plugin</h3>
<p>The plugin is shipped with a customized version of the <code>kotlinx.serialization</code> plugin. To use it you don&apos;t have to 
add new buildscript dependencies, just apply the plugins and add a dependency on the serialization library:</p>
<pre><code class="lang-groovy">apply <span class="hljs-string">plugin:</span> <span class="hljs-string">&apos;org.jetbrains.kotlin.platform.native&apos;</span>
apply <span class="hljs-string">plugin:</span> <span class="hljs-string">&apos;kotlinx-serialization-native&apos;</span>

dependencies {
    implementation <span class="hljs-string">&apos;org.jetbrains.kotlinx:kotlinx-serialization-runtime-native&apos;</span>
}
</code></pre>
<p>The <a href="https://github.com/ilmat192/kotlin-native-serialization-sample" target="_blank">example project</a> for details.</p>
<h3 id="dsl-example">DSL example</h3>
<p>In this section a commented DSL is shown. 
See also the example projects that use this plugin, e.g.
<a href="https://github.com/Kotlin/kotlinx.coroutines" target="_blank">Kotlinx.coroutines</a>,
<a href="https://github.com/e5l/http-client-common/tree/master/samples/ios-test-application" target="_blank">MPP http client</a></p>
<pre><code class="lang-groovy">plugins {
    id <span class="hljs-string">&quot;org.jetbrains.kotlin.platform.native&quot;</span> version <span class="hljs-string">&quot;1.3.0-rc-146&quot;</span>
}

sourceSets.main {
    <span class="hljs-comment">// Plugin uses Gradle&apos;s source directory sets here,</span>
    <span class="hljs-comment">// so all the DSL methods available in SourceDirectorySet can be called here.</span>
    <span class="hljs-comment">// Platform independent sources.</span>
    kotlin.srcDirs += <span class="hljs-string">&apos;src/main/customDir&apos;</span>

    <span class="hljs-comment">// Linux-specific sources</span>
    target(<span class="hljs-string">&apos;linux&apos;</span>).srcDirs += <span class="hljs-string">&apos;src/main/linux&apos;</span>
}

components.main {

    <span class="hljs-comment">// Set up targets</span>
    targets = [<span class="hljs-string">&apos;linux_x64&apos;</span>, <span class="hljs-string">&apos;macos_x64&apos;</span>, <span class="hljs-string">&apos;mingw_x64&apos;</span>]

    <span class="hljs-comment">// Set up output kinds</span>
    outputKinds = [EXECUTABLE, KLIBRARY, FRAMEWORK, DYNAMIC, STATIC]

    <span class="hljs-comment">// Specify custom entry point for executables</span>
    entryPoint = <span class="hljs-string">&quot;org.test.myMain&quot;</span>

    <span class="hljs-comment">// Target-specific options</span>
    target(<span class="hljs-string">&apos;linux_x64&apos;</span>) {
        linkerOpts <span class="hljs-string">&apos;-L/linux/lib/path&apos;</span>
    }

    <span class="hljs-comment">// Targets independent options</span>
    allTargets {
        linkerOpts <span class="hljs-string">&apos;-L/common/lib/path&apos;</span>
    }

    dependencies {

        <span class="hljs-comment">// Dependency on a published Kotlin/Native library.</span>
        implementation <span class="hljs-string">&apos;org.test:mylib:1.0&apos;</span>

        <span class="hljs-comment">// Dependency on a project</span>
        implementation project(<span class="hljs-string">&apos;library&apos;</span>)

        <span class="hljs-comment">// Cinterop dependency</span>
        cinterop(<span class="hljs-string">&apos;interop-name&apos;</span>) {
            <span class="hljs-comment">// Def-file describing the native API.</span>
            <span class="hljs-comment">// The default path is src/main/c_interop/&lt;interop-name&gt;.def</span>
            defFile project.file(<span class="hljs-string">&quot;deffile.def&quot;</span>)

            <span class="hljs-comment">// Package to place the Kotlin API generated.</span>
            packageName <span class="hljs-string">&apos;org.sample&apos;</span>

            <span class="hljs-comment">// Options to be passed to compiler and linker by cinterop tool.</span>
            compilerOpts <span class="hljs-string">&apos;Options for native stubs compilation&apos;</span>
            linkerOpts <span class="hljs-string">&apos;Options for native stubs&apos;</span>

            <span class="hljs-comment">// Additional headers to parse.</span>
            headers project.files(<span class="hljs-string">&apos;header1.h&apos;</span>, <span class="hljs-string">&apos;header2.h&apos;</span>)

            <span class="hljs-comment">// Directories to look for headers.</span>
            includeDirs {
                <span class="hljs-comment">// All objects accepted by the Project.file method may be used with both options.</span>

                <span class="hljs-comment">// Directories for header search (an analogue of the -I&lt;path&gt; compiler option).</span>
                allHeaders <span class="hljs-string">&apos;path1&apos;</span>, <span class="hljs-string">&apos;path2&apos;</span>

                <span class="hljs-comment">// Additional directories to search headers listed in the &apos;headerFilter&apos; def-file option.</span>
                <span class="hljs-comment">// -headerFilterAdditionalSearchPrefix command line option analogue.</span>
                headerFilterOnly <span class="hljs-string">&apos;path1&apos;</span>, <span class="hljs-string">&apos;path2&apos;</span>
            }
            <span class="hljs-comment">// A shortcut for includeDirs.allHeaders.</span>
            includeDirs <span class="hljs-string">&quot;include/directory&quot;</span> <span class="hljs-string">&quot;another/directory&quot;</span>

            <span class="hljs-comment">// Pass additional command line options to the cinterop tool.</span>
            extraOpts <span class="hljs-string">&apos;-verbose&apos;</span>

            <span class="hljs-comment">// Additional configuration for Linux.</span>
            target(<span class="hljs-string">&apos;linux&apos;</span>) {
                compilerOpts <span class="hljs-string">&apos;Linux-specific options&apos;</span>
            }
        }
    }

    <span class="hljs-comment">// Additional pom settings for publication.</span>
    pom {
        withXml {
            <span class="hljs-keyword">def</span> root = asNode()
            root.appendNode(<span class="hljs-string">&apos;name&apos;</span>, <span class="hljs-string">&apos;My library&apos;</span>)
            root.appendNode(<span class="hljs-string">&apos;description&apos;</span>, <span class="hljs-string">&apos;A Kotlin/Native library&apos;</span>)
        }
    }

    <span class="hljs-comment">// Additional options passed to the compiler.</span>
    extraOpts <span class="hljs-string">&apos;--time&apos;</span>
}
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="cocoapods.html" class="navigation navigation-prev " aria-label="Previous page: CocoaPods 集成">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="debugging.html" class="navigation navigation-next " aria-label="Next page: 调试">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Gradle 插件","level":"1.16.8","depth":2,"next":{"title":"调试","level":"1.16.9","depth":2,"path":"txt/native/debugging.md","ref":"txt/native/debugging.md","articles":[]},"previous":{"title":"CocoaPods 集成","level":"1.16.7","depth":2,"path":"txt/native/cocoapods.md","ref":"txt/native/cocoapods.md","articles":[]},"dir":"ltr"},"config":{"plugins":["regexplace"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"regexplace":{"substitutes":[{"pattern":"<em>([^<]+)</em>\\{: ?\\.keyword\\ ?}","flags":"g","substitute":"<em><strong><code>$1</code></strong></em>"},{"pattern":"<p>\\{:#([^} ]+)\\}</p>","flags":"g","substitute":"<a name=\"$1\"></a>"},{"pattern":"\"/docs/tutorials/","flags":"g","substitute":"\"https://www.kotlincn.net/docs/tutorials/"},{"pattern":"\"/docs/diagnostics/","flags":"g","substitute":"\"https://www.kotlincn.net/docs/diagnostics/"},{"pattern":"\"/community/","flags":"g","substitute":"\"https://www.kotlincn.net/community/"}]},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":16,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"zh-hans","gitbook":"*"},"file":{"path":"txt/native/gradle_plugin.md","mtime":"2021-08-17T05:13:50.069Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-08-18T05:55:43.929Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

